/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./main.js":
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/game */ \"./src/game.js\");\n\r\n\r\n\r\n\r\nconst GAME = new _src_game__WEBPACK_IMPORTED_MODULE_0__[\"Game\"](io(), PIXI)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./main.js?");

/***/ }),

/***/ "./src/client.js":
/*!***********************!*\
  !*** ./src/client.js ***!
  \***********************/
/*! exports provided: Client */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Client\", function() { return Client; });\nclass Client {\r\n\r\n\r\n\tconstructor(game, socket) {\r\n\t\tthis.game = game\r\n\t\tthis.socket = socket\r\n\t\tthis.init(socket)\r\n\t}\r\n\r\n\r\n\tinit(socket) {\r\n\t\tsocket.on('heroesData', heroesData => {\r\n\t\t\tthis.game.heroesData = {}\r\n\t\t\theroesData.forEach(heroData => {\r\n\t\t\t\tthis.game.heroesData[heroData.type] = heroData\r\n\t\t\t})\r\n\t\t\tconsole.log(this.game.heroesData)\r\n\t\t\tthis.game.heroCreation.init(heroesData)\r\n\t\t})\r\n\r\n\t\tsocket.on('quests', quests => {\r\n\t\t\tquests.forEach(quest => {\r\n\t\t\t\tthis.game.quests[quest.id] = quest\r\n\t\t\t})\r\n\t\t\tconsole.log(this.game.quests)\r\n\t\t})\r\n\r\n\t\tsocket.on('mapData', data => this.game.map.init(JSON.parse(data)))\r\n\r\n\t\tsocket.on('heroCreation', data => {\r\n\t\t\tthis.game.heroCreation.onEvent(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('heroDeleted', ownedHeroes => {\r\n\t\t\tthis.game.heroSelection.init(ownedHeroes)\r\n\t\t})\r\n\r\n\t\tsocket.on('login', data => {\t\t\r\n\t\t\tthis.game.loginScreen.onEvent(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('register', data => {\t\t\t\r\n\t\t\tthis.game.registerScreen.onEvent(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('initPackage', data => {\r\n\t\t\tdata.heroesProps.forEach(heroProps => {\r\n\t\t\t\tthis.game.addHero(heroProps)\r\n\t\t\t})\r\n\t\t\tdata.dragonsProps.forEach(dragonProps => {\r\n\t\t\t\tthis.game.addDragon(dragonProps)\r\n\t\t\t})\r\n\t\t\tconsole.log(this.game.dragons)\r\n\t\t\tthis.game.start()\r\n\t\t})\r\n\r\n\t\tsocket.on('updatePackage', data => {\r\n\t\t\tdata.heroesProps.forEach(heroProps => {\r\n\t\t\t\tthis.game.updateHero(heroProps)\r\n\t\t\t})\r\n\t\t\tdata.dragonsProps.forEach(dragonProps => {\r\n\t\t\t\tthis.game.updateDragon(dragonProps)\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tsocket.on('newHeroConnected', heroProps => {\r\n\t\t\tthis.game.addHero(heroProps)\r\n\t\t})\r\n\r\n\t\tsocket.on('heroDisconnected', id => {\r\n\t\t\tthis.game.deleteHero(id)\r\n\t\t})\r\n\r\n\t\tsocket.on('chat', data => {\r\n\t\t\tthis.game.chat.appendMessage(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('party', data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tthis.game.chat.onPartyEvent(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('ability', pack => {\r\n\t\t\tif(this.game.heroes[pack.heroID]) {\r\n\t\t\t\tthis.game.heroes[pack.heroID].abilities[pack.id].processPackage(pack)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tsocket.on('expGoldBoost', data => {\r\n\t\t\tthis.game.self.parseDragonRewards(data)\r\n\t\t\tif(this.game.questUI) {\r\n\t\t\t\tthis.game.questUI.onDragonKill(data.dragon)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tsocket.on('fireball', data => {\r\n\t\t\tthis.game.addFireball(data)\r\n\t\t})\r\n\r\n\t\tsocket.on('fireballDeath', ID => this.game.removeFireball(ID))\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/client.js?");

/***/ }),

/***/ "./src/components/chat.js":
/*!********************************!*\
  !*** ./src/components/chat.js ***!
  \********************************/
/*! exports provided: Chat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Chat\", function() { return Chat; });\n/* harmony import */ var _tools_geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../tools/geometry */ \"./src/tools/geometry.js\");\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\n\r\nclass Chat {\r\n\r\n\tconstructor(game) {\r\n\t\tthis.game         = game\r\n\t\tthis.socket       = game.socket\r\n\t\tthis.container    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatContainer')\r\n\t\tthis.header       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatHeader')\r\n\t\tthis.minimize     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatMinimize')\r\n\t\tthis.maximize     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatMaximize')\r\n\t\tthis.chatContent  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatContent')\r\n\t\tthis.allLinks     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getByClass\"])('chat-link')\r\n\t\tthis.settings     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatSettings')\r\n\t\tthis.allCards     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getByClass\"])('messages')\r\n\t\tthis.input        = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('chatInput')\r\n\t\tthis.inputValues  = ['', '', '', '', '']\r\n\t\tthis.cardTypes    = ['global', 'area', 'party', 'whisper', 'combat']\r\n\t\tthis.msgCount     = [0, 0, 0, 0, 0]\r\n\t\tthis.msgsPerCard  = 50\r\n\t\tthis.maxMsgLength = 100\r\n\t\tthis.areaRange    = 1500\r\n\t\tthis.badgeCont    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('whisperUnseenCounter')\r\n\t\tthis.badge        = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('whisperUnseenCounterValue')\r\n\t\tthis.badgeValue   = 0\r\n\t\tthis.activeCard   = 0\r\n\t\tthis.party        = false\r\n\t\tthis.partyUI      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('partyUI')\r\n\t\tthis.showPartyUI  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('showPartyUI')\r\n\t\tthis.closePartyUI = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('closePartyUI')\r\n\t\tthis.partyName    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('partyName')\r\n\t\tthis.createParty  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('createParty')\r\n\t\tthis.joinParty    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('joinParty')\r\n\t\tthis.leaveParty   = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"getById\"])('leaveParty')\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.container.addEventListener('mouseover', () => {\r\n\t\t\tthis.game.mouse.hide()\r\n\t\t})\r\n\t\tthis.container.addEventListener('mouseout', () => {\r\n\t\t\tthis.game.mouse.show()\r\n\t\t})\r\n\t\tthis.partyUI.addEventListener('mouseover', () => {\r\n\t\t\tthis.game.mouse.hide()\r\n\t\t})\r\n\t\tthis.partyUI.addEventListener('mouseout', () => {\r\n\t\t\tthis.game.mouse.show()\r\n\t\t})\r\n\t\tthis.container.oncontextmenu = ev => ev.preventDefault()\r\n\t\tthis.partyUI.oncontextmenu   = ev => ev.preventDefault()\r\n\t\tthis.showPartyUI.addEventListener('click', () => {\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.partyUI)\r\n\t\t\tthis.partyName.focus()\r\n\t\t})\r\n\t\tthis.closePartyUI.addEventListener('click', () => Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.partyUI))\r\n\t\tthis.createParty.addEventListener('click', () => {\r\n\t\t\t this.isValidPartyName()\r\n\t\t\t.then(name => this.emitPartyEvent({code: 'make', name}))\r\n\t\t\t.catch(err => this.alertPartyInfo(err, true))\r\n\t\t})\r\n\t\tthis.joinParty.addEventListener('click', () => {\r\n\t\t\t this.isValidPartyName()\r\n\t\t\t.then(name => this.emitPartyEvent({code: 'join', name}))\r\n\t\t\t.catch(err => this.alertPartyInfo(err, true))\r\n\t\t})\r\n\t\tthis.leaveParty.addEventListener('click', () => {\r\n\t\t\tthis.emitPartyEvent({code: 'leave', name: this.party})\r\n\t\t\tthis.party = ''\r\n\t\t\tthis.resetPartyChat()\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.leaveParty)\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.showPartyUI)\r\n\t\t})\r\n\t\tfor(let i = 0; i < this.allLinks.length; i++) {\r\n\t\t\tthis.allLinks[i].addEventListener('click', () => {\r\n\t\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.chatContent)\r\n\t\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.maximize)\r\n\t\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.minimize)\r\n\t\t\t\tthis.activeCard = i\r\n\t\t\t\tthis.hideAll()\r\n\t\t\t\tthis.showCard(i)\r\n\t\t\t})\r\n\t\t}\r\n\t\tthis.minimize.addEventListener('click', () => {\t\t\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.chatContent)\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.minimize)\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.maximize)\r\n\t\t})\r\n\t\tthis.maximize.addEventListener('click', () => {\t\t\t\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.chatContent)\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.maximize)\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.minimize)\r\n\t\t})\r\n\t\tthis.partyName.addEventListener('focus', () => this.game.self.props.canMove = false)\r\n\t\tthis.partyName.addEventListener('blur' , () => this.game.self.props.canMove = true)\r\n\t\tthis.input.setAttribute('maxlength', this.maxMsgLength)\r\n\t\tthis.input.addEventListener('focus', () => this.game.self.props.canMove = false)\r\n\t\tthis.input.addEventListener('blur' , () => this.game.self.props.canMove = true)\r\n\t\tthis.input.addEventListener('keyup', ev => {\r\n\t\t\tif(ev.keyCode == 13 && this.input.value != '') {\r\n\t\t\t\tthis.sendMessage()\r\n\t\t\t} else {\r\n\t\t\t\tthis.inputValues[this.activeCard] = this.input.value\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tplayerMovedScroll(card) {\r\n\t\treturn card.scrollTop + 290 < card.scrollHeight\r\n\t}\r\n\r\n\tscrollCardDown(card) {\r\n\t\tcard.scrollTop = card.scrollHeight - 245\r\n\t}\r\n\r\n\thideAll() {\r\n\t\tfor(let i = 0; i < this.allCards.length; i++) {\r\n\t\t\tthis.hideCard(i)\r\n\t\t}\r\n\t}\r\n\r\n\tshowCard(i) {\r\n\t\tconst card = this.allCards[i], link = this.allLinks[i]\r\n\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(card)\r\n\t\tif(i == 3) {\r\n\t\t\tthis.badgeValue = 0\r\n\t\t\tthis.badge.innerText = ''\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.badgeCont)\r\n\t\t}\r\n\t\tthis.scrollCardDown(card)\r\n\t\tlink.classList.add('selected-chat-link')\r\n\t\tthis.input.value = this.inputValues[i]\r\n\t\t//Disabling input in combat chat\r\n\t\tif(i == 4) {\r\n\t\t\tthis.input.style.borderTop = '1px solid transparent'\r\n\t\t\tthis.input.disabled = true\r\n\t\t} else {\r\n\t\t\tthis.input.style.borderTop = '1px dashed gray'\r\n\t\t\tthis.input.disabled = false\r\n\t\t}\r\n\t}\r\n\r\n\thideCard(i) {\r\n\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.allCards[i])\r\n\t\tthis.allLinks[i].classList.remove('selected-chat-link')\r\n\t}\r\n\r\n\tsendMessage() {\r\n\t\tlet message = this.inputValues[this.activeCard]\r\n\t\t//If it is a whisper\r\n\t\tlet data = {}\r\n\t\tif(this.activeCard == 3) {\r\n\t\t\tdata = this.parseWhisperInput(message)\r\n\t\t\tif(!data) return\r\n\t\t\tdata.message = this.validateMessage(data.message)\r\n\t\t\tif(!data.message) return\t\r\n\t\t\tthis.socket.emit('chat', Object.assign(\r\n\t\t\t\t{}, data, {\r\n\t\t\t\t\tsender: this.game.selectedHero,\r\n\t\t\t\t\tactiveCard: 3\r\n\t\t\t\t}\r\n\t\t\t))\r\n\t\t\tthis.appendMessage({\r\n\t\t\t\tsender: '@' + data.to,\r\n\t\t\t\tmessage: data.message,\r\n\t\t\t\tactiveCard: 3\r\n\t\t\t})\r\n\t\t\tthis.clear(`@${data.to} `)\r\n\r\n\t\t\t//If it is a party\r\n\t\t} else if(this.activeCard == 2) {\r\n\t\t\tthis.clear()\r\n\t\t\tmessage = this.validateMessage(message)\r\n\t\t\tif(!message) return\r\n\t\t\tif(this.party != '') {\r\n\t\t\t\tthis.socket.emit('party', {\r\n\t\t\t\t\tcode    : 'message',\r\n\t\t\t\t\tsender  : this.game.selectedHero,\r\n\t\t\t\t\tmessage : message,\r\n\t\t\t\t\tname    : this.party\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.alertChatError('You are not in a party')\r\n\t\t\t}\r\n\t\t\t//If it is area chat we're sending our coordinates as well\r\n\t\t} else if(this.activeCard == 1) {\r\n\t\t\tthis.clear()\r\n\t\t\tmessage = this.validateMessage(message)\r\n\t\t\tif(!message) return\r\n\t\t\tthis.socket.emit('chat', {\r\n\t\t\t\tactiveCard : this.activeCard,\r\n\t\t\t\tsender     : this.game.selectedHero,\r\n\t\t\t\tmessage    : message,\r\n\t\t\t\tX          : this.game.self.props.X,\r\n\t\t\t\tY          : this.game.self.props.Y\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.clear()\r\n\t\t\tmessage = this.validateMessage(message)\r\n\t\t\tif(!message) return\r\n\t\t\tthis.socket.emit('chat', {\r\n\t\t\t\tactiveCard : this.activeCard,\r\n\t\t\t\tsender     : this.game.selectedHero,\r\n\t\t\t\tmessage    : message\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tclear(value = '') {\r\n\t\tthis.inputValues[this.activeCard] = value\r\n\t\tthis.input.value = value\r\n\t}\r\n\r\n\tparseWhisperInput(text) {\r\n\t\tif(!text.startsWith('@')) {\r\n\t\t\tthis.alertChatError('Invalid format, use @name my message')\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\tconst arr = text.split(' '),\r\n\t\t\t      to  = arr[0].substring(1),\r\n\t\t\t      msg = arr.slice(1).join(' ')\r\n\t\t\treturn {\r\n\t\t\t\tto, message: msg\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tappendMessage(data, combat = false) {\r\n\t\t//If it is area chat, checking if sender is within range\r\n\t\tif(data.activeCard == 1) {\r\n\t\t\tif(_tools_geometry__WEBPACK_IMPORTED_MODULE_0__[\"Point\"].distance({\r\n\t\t\t\tX: data.X, Y: data.Y\r\n\t\t\t}, {\r\n\t\t\t\tX: this.game.self.props.X,\r\n\t\t\t\tY: this.game.self.props.Y\r\n\t\t\t}) > this.areaRange) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst sender  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"make\"])('span.sender', combat ? '' : '(' + data.sender + ') : '),\r\n\t\t\t  message = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"make\"])('span', data.message),\r\n\t\t\t  p       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"make\"])('p')\r\n\r\n\t\t//When clicking on a sender name in whisper, @sender is placed in input\r\n\t\tif(data.activeCard == 3) {\r\n\t\t\tsender.addEventListener('click', () => {\r\n\t\t\t\tthis.clear(`@${data.sender} `)\r\n\t\t\t\tthis.input.focus()\r\n\t\t\t\tthis.inFocus = true\r\n\t\t\t})\r\n\t\t\tsender.classList.add('whisper-sender')\r\n\t\t}\r\n\r\n\t\tp.appendChild(sender)\r\n\t\tp.appendChild(message)\r\n\t\tconst card = this.allCards[data.activeCard]\r\n\t\tcard.appendChild(p) \r\n\r\n\t\t//Removing first message if card has too many messages\r\n\t\tif(++this.msgCount[data.activeCard] > this.msgsPerCard) {\r\n\t\t\tcard.removeChild(card.querySelector('p:first-child'))\r\n\t\t}\r\n\r\n\t\tif(!this.playerMovedScroll(card)) {\r\n\t\t\tthis.scrollCardDown(card)\r\n\t\t}\r\n\r\n\t\t//Displaying whisper counter\r\n\t\tif(data.activeCard == 3 && this.activeCard != 3) {\r\n\t\t\tthis.badgeValue++\r\n\t\t\tthis.badge.innerText = this.badgeValue\r\n\t\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.badgeCont)\r\n\t\t}\r\n\t}\r\n\r\n\tvalidateMessage(message) {\r\n\t\tmessage = message.trim().substring(0, this.maxMsgLength)\r\n\t\tif(message == '') return false\r\n\r\n\t\treturn message.replace(/fuck/g, '****')\r\n\t}\r\n\r\n\tisValidPartyName() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst name = this.partyName.value.trim()\r\n\t\t\tif(name == '') {\r\n\t\t\t\treject('Party name missing')\r\n\t\t\t} else {\r\n\t\t\t\tresolve(name)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\temitPartyEvent(data) {\r\n\t\tconst pack = Object.assign(\r\n\t\t\t{}, data, {\r\n\t\t\t\tid       : this.game.self.props.id,\r\n\t\t\t\theroName : this.game.self.props.name\r\n\t\t\t})\r\n\t\tthis.socket.emit('party', pack)\r\n\t\tthis.partyName.value = ''\r\n\t}\r\n\r\n\tonPartyEvent(data) {\r\n\t\tif(data.code == 'created') {\r\n\t\t\tthis.party = data.name\r\n\t\t\tthis.hidePartyUI()\r\n\t\t} else if(data.code == 'nameTaken') {\r\n\t\t\tthis.alertPartyInfo('Party already exists', true)\r\n\t\t} else if(data.code == 'joined') {\r\n\t\t\tthis.party = data.name\r\n\t\t\tthis.hidePartyUI()\r\n\t\t} else if(data.code == 'notFound') {\r\n\t\t\tthis.alertPartyInfo('Party not found', true)\r\n\t\t}\r\n\t}\r\n\r\n\thidePartyUI() {\r\n\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.partyUI)\r\n\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"hide\"])(this.showPartyUI)\r\n\t\tObject(_util_dom_functions__WEBPACK_IMPORTED_MODULE_1__[\"show\"])(this.leaveParty)\r\n\t}\r\n\r\n\tresetPartyChat() {\r\n\t\tthis.allCards[2].innerHTML = ''\r\n\t\tthis.inputValues[2]        = ''\r\n\t\tthis.msgCount[2]           = 0\r\n\t\tif(this.activeCard == 2) {\r\n\t\t\tthis.input.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\talertChatError(msg) {\r\n\t\tthis.input.value = msg\r\n\t\tthis.input.style.color = '#ff3200'\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.input.value = ''\r\n\t\t\tthis.input.style.color = 'white'\r\n\t\t}, 3000)\r\n\t}\r\n\r\n\talertPartyInfo(msg, err = false) {\r\n\t\tthis.partyName.value = msg\r\n\t\tthis.partyName.style.color = err ? 'red' : 'green'\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.partyName.value = ''\r\n\t\t\tthis.partyName.style.color = 'black'\r\n\t\t}, 3000)\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/chat.js?");

/***/ }),

/***/ "./src/components/hero-creation.js":
/*!*****************************************!*\
  !*** ./src/components/hero-creation.js ***!
  \*****************************************/
/*! exports provided: HeroCreation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HeroCreation\", function() { return HeroCreation; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nclass HeroCreation {\r\n\r\n\tconstructor(game) {\r\n\t\tthis.game           = game\r\n\t\tthis.container      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroCreationScreen')\r\n\t\tthis.heroesDetailed = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroesDetailed')\r\n\t\tthis.heroesList     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroesList')\r\n\t\tthis.selectedHero   = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('selectedHero')\r\n\t\tthis.heroName       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroName'),\r\n\t\tthis.create         = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('create'),\r\n\t\tthis.link           = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('showHeroSelection')\r\n\t\tthis.errors         = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('creationErrors')\r\n\t}\r\n\r\n\tinit(heroesData) {\r\n\t\tthis.link.addEventListener('click', ev => {\r\n\t\t\tev.preventDefault()\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.heroSelection.show()\r\n\t\t})\r\n\t\tthis.create.addEventListener('click', () => {\r\n\t\t\tconst heroType = this.selectedHero.innerText.trim(),\r\n\t\t\t\t  heroName = this.heroName.value.trim()\r\n\r\n\t\t\tif(this.validate(heroType, heroName, this.game.username)) {\r\n\t\t\t\tthis.send(heroType, heroName, this.game.username)\r\n\t\t\t}\r\n\t\t})\r\n\t\theroesData.forEach(heroData => {\r\n\t\t\tconst card     = this.makeHeroCard(heroData),\r\n\t\t\t\t  detailed = this.makeHeroDetailed(heroData)\r\n\r\n\t\t\tcard.addEventListener('mouseover', () => {\r\n\t\t\t\tthis.hideHeroesDetailed()\r\n\t\t\t\tdetailed.style.display = 'block'\r\n\t\t\t})\r\n\r\n\t\t\tcard.addEventListener('click', () => {\r\n\t\t\t\tthis.selectedHero.innerText = heroData.type\r\n\t\t\t})\r\n\r\n\t\t\tthis.heroesList.appendChild(card)\r\n\t\t\tthis.heroesDetailed.appendChild(detailed)\r\n\t\t})\r\n\t}\r\n\r\n\tmakeHeroCard(heroData) {\r\n\t\tconst card \t\t        = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-card clearfix'),\r\n\t\t\t  stats             = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t  heroImgContainer  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-img-container'),\r\n\t\t\t  type              = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('h3', heroData.type),\r\n\t\t\t  attackContainer   = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t  defenceContainer  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t  mobilityContainer = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t  heroImg           = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-img'),\r\n\t\t\t  attackLabel       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Attack:'),\r\n\t\t\t  defenceLabel      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Defence:'),\r\n\t\t\t  mobilityLabel     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Mobility:'),\r\n\t\t\t  attack            = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span.red'),\r\n\t\t\t  defence           = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span.red'),\r\n\t\t\t  mobility          = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span.red')\r\n\r\n\t\tattack.style.width   = this.getStatWidth(heroData.base_attack)\r\n\t\tdefence.style.width  = this.getStatWidth(heroData.base_defence)\r\n\t\tmobility.style.width = this.getStatWidth(heroData.base_mobility)\r\n\r\n\t\tattackContainer.appendChild(attackLabel)\r\n\t\tdefenceContainer.appendChild(defenceLabel)\r\n\t\tmobilityContainer.appendChild(mobilityLabel)\r\n\r\n\t\tattackContainer.appendChild(attack)\r\n\t\tdefenceContainer.appendChild(defence)\r\n\t\tmobilityContainer.appendChild(mobility)\r\n\r\n\t\tstats.appendChild(type)\r\n\t\tstats.appendChild(attackContainer)\r\n\t\tstats.appendChild(defenceContainer)\r\n\t\tstats.appendChild(mobilityContainer)\r\n\r\n\t\tthis.setBackgroundImage(heroImg, heroData.sprite)\r\n\t\theroImgContainer.appendChild(heroImg)\r\n\r\n\t\tcard.appendChild(stats)\r\n\t\tcard.appendChild(heroImgContainer)\r\n\r\n\t\treturn card\r\n\t}\r\n\r\n\tgetStatWidth(stat) {\r\n\t\tconst maxWidth = 130\r\n\t\treturn parseInt((stat / 100) * maxWidth) + 'px'\r\n\t}\r\n\r\n\tmakeHeroDetailed(heroData) {\r\n\t\tconst heroDetailed       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-detailed'),\r\n\t\t\t  type               = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('h1', heroData.type),\r\n\t\t\t  desc \t\t         = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-description', heroData.description),\r\n\t\t\t  abilitiesContainer = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div')\r\n\r\n\t\theroData.abilities.forEach(ability => {\r\n\t\t\tconst abilityContainer = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.ability'),\r\n\t\t\t      abilityHeader    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.ability-header'),\r\n\t\t\t      abilityIcon      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.ability-icon'),\r\n\t\t\t      abilityName      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.ability-name', ability.name),\r\n\t\t\t      abilityDesc      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('p.ability-description', ability.description)\r\n\r\n\t\t\tthis.setBackgroundImage(abilityIcon, ability.sprite)\r\n\r\n\t\t\tabilityHeader.appendChild(abilityIcon)\r\n\t\t\tabilityHeader.appendChild(abilityName)\r\n\t\t\tabilityContainer.appendChild(abilityHeader)\r\n\t\t\tabilityContainer.appendChild(abilityDesc)\r\n\r\n\t\t\tabilitiesContainer.appendChild(abilityContainer)\r\n\t\t})\r\n\r\n\t\theroDetailed.appendChild(type)\r\n\t\theroDetailed.appendChild(desc)\r\n\t\theroDetailed.appendChild(abilitiesContainer)\r\n\t\t\r\n\t\treturn heroDetailed\r\n\t}\r\n\r\n\tsetBackgroundImage(element, img) {\r\n\t\telement.style.backgroundImage = `url(client/assets/images/${img})`\r\n\t}\r\n\r\n\thideHeroesDetailed() {\r\n\t\tconst heroesDetailed = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getByClass\"])('hero-detailed')\r\n\t\tfor(let i = 0; i < heroesDetailed.length; i++) {\r\n\t\t\theroesDetailed[i].style.display = 'none'\r\n\t\t}\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.selectedHero.innerText = ''\r\n\t\tthis.heroName.value = ''\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.clear()\r\n\t\tthis.errors.innerText = ''\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\tdisplayError(error) {\r\n\t\tthis.errors.innerText = error\r\n\t\tthis.errors.style.color = 'red'\r\n\t}\r\n\r\n\tdisplaySuccess() {\r\n\t\tthis.errors.innerText = 'Successfully created new hero!'\r\n\t\tthis.errors.style.color = 'green'\r\n\t}\r\n\r\n\tvalidate(heroType, heroName, username) {\r\n\t\tif(username == '') {\r\n\t\t\tthis.displayError('Account is not logged in')\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif(heroType == '') {\r\n\t\t\tthis.displayError('Hero not selected')\r\n\t\t\treturn false\r\n\t\t} else if(heroName.length == 0) {\r\n\t\t\tthis.displayError('Hero name is required')\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\tsend(heroType, heroName, username) {\r\n\t\tthis.game.socket.emit('/player/addHero', {\r\n\t\t\theroType, heroName, username\r\n\t\t})\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tif(data.success) {\r\n\t\t\tthis.clear()\r\n\t\t\tthis.displaySuccess()\r\n\t\t\tthis.game.heroSelection.init(data.ownedHeroes)\r\n\t\t\tthis.game.ownedHeroes = data.ownedHeroes\r\n\t\t} else {\r\n\t\t\tthis.displayError(data.message)\r\n\t\t}\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/hero-creation.js?");

/***/ }),

/***/ "./src/components/hero-selection.js":
/*!******************************************!*\
  !*** ./src/components/hero-selection.js ***!
  \******************************************/
/*! exports provided: HeroSelection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HeroSelection\", function() { return HeroSelection; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nclass HeroSelection {\r\n\t\r\n\tconstructor(game) {\r\n\t\tthis.game         = game\r\n\t\tthis.container    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroSelectionScreen')\r\n\t\tthis.welcome      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroSelectionWelcome')\r\n\t\tthis.ownedHeroes  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('ownedHeroes')\r\n\t\tthis.play         = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('play')\r\n\t\tthis.delete       = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('deleteHero')\r\n\t\tthis.link         = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('showHeroCreation')\r\n\t\tthis.selectedHero = ''\r\n\t\tthis.initDefault()\r\n\t}\r\n\r\n\tinitDefault() {\r\n\t\tthis.disableButtons()\r\n\t\tthis.link.addEventListener('click', () => {\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.heroCreation.show()\r\n\t\t})\r\n\t\tlet height = window.innerHeight - 200\r\n\t\tif(height < 500) height = 500\r\n\t\tthis.ownedHeroes.style.height = height + 'px'\r\n\t\tthis.play.addEventListener('click', () => {\r\n\t\t\tif(this.selectedHero != '') {\r\n\t\t\t\tconsole.log(this.game.ownedHeroes, this.selectedHero)\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tfor(let i = 0; i < this.game.ownedHeroes.length; i++) {\r\n\t\t\t\t\tif(this.game.ownedHeroes[i].name == this.selectedHero) {\r\n\t\t\t\t\t\tindex = i\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//send request for init package...\r\n\t\t\t\tthis.hide()\r\n\t\t\t\tthis.game.makeSelf(this.game.ownedHeroes[index])\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.delete.addEventListener('click', () => {\r\n\t\t\tif(this.selectedHero != '') {\r\n\t\t\t\tthis.game.socket.emit('/player/deleteHero', {\r\n\t\t\t\t\theroName: this.selectedHero,\r\n\t\t\t\t\tusername: this.game.username\r\n\t\t\t\t})\r\n\t\t\t\tfor(let i = 0; i < this.game.ownedHeroes.length; i++) {\r\n\t\t\t\t\tif(this.game.ownedHeroes[i].name == this.selectedHero) {\r\n\t\t\t\t\t\tthis.game.ownedHeroes.splice(i, 1)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tinit(ownedHeroes) {\r\n\t\tthis.disableButtons()\r\n\t\tthis.ownedHeroes.innerHTML = ''\r\n\t\tthis.welcome.innerText = 'Welcome ' + this.game.username\r\n\t\townedHeroes.forEach(hero => {\r\n\t\t\tconst card \t\t\t= Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.my-hero'),\r\n\t\t\t      h3            = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('h3', hero.name),\r\n\t\t\t      img           = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.hero-img'),\r\n\t\t\t      progress      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.my-hero-progress'),\r\n\t\t\t      lvlContainer  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t      lvlLabel      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Level:'),\r\n\t\t\t      goldContainer = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t      goldLabel     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Gold:'),\r\n\t\t\t      questContainer= Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div'),\r\n\t\t\t      questLabel    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('label', 'Quests done:'),\r\n\t\t\t      lvlValue      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span', hero.level),\r\n\t\t\t      goldValue     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span', hero.gold),\r\n\t\t\t      questValue    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('span', hero.won ? hero.id_quest : hero.id_quest - 1)\r\n\r\n\t\t\tthis.setBackgroundImage(\r\n\t\t\t\timg, this.game.heroesData[hero.type].sprite\r\n\t\t\t)\r\n\r\n\t\t\tcard.appendChild(h3)\r\n\t\t\tcard.appendChild(img)\r\n\r\n\t\t\tlvlContainer.appendChild(lvlLabel)\r\n\t\t\tlvlContainer.appendChild(lvlValue)\r\n\r\n\t\t\tgoldContainer.appendChild(goldLabel)\r\n\t\t\tgoldContainer.appendChild(goldValue)\r\n\r\n\t\t\tquestContainer.appendChild(questLabel)\r\n\t\t\tquestContainer.appendChild(questValue)\r\n\r\n\t\t\tprogress.appendChild(lvlContainer)\r\n\t\t\tprogress.appendChild(goldContainer)\r\n\t\t\tprogress.appendChild(questContainer)\r\n\r\n\t\t\tcard.appendChild(progress)\r\n\t\t\tthis.addCardEventListener(card, hero)\r\n\r\n\t\t\tthis.ownedHeroes.appendChild(card)\r\n\t\t})\r\n\t} \r\n\r\n\taddCardEventListener(card, hero) {\r\n\t\tcard.addEventListener('click', () => {\r\n\t\t\tthis.selectedHero = hero.name\r\n\t\t\tthis.removeSelectedStyles()\r\n\t\t\tcard.classList.add('my-hero-selected')\r\n\t\t\tthis.enableButtons()\r\n\t\t})\r\n\t}\r\n\r\n\tremoveSelectedStyles() {\r\n\t\tconst cards = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getByClass\"])('my-hero')\r\n\t\tfor(let i = 0; i < cards.length; i++) {\r\n\t\t\tcards[i].classList.remove('my-hero-selected')\r\n\t\t}\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.disableButtons()\r\n\t\tthis.removeSelectedStyles()\r\n\t\tthis.selectedHero = ''\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n\r\n\tenableButtons() {\r\n\t\tthis.play.disabled = false\r\n\t\tthis.play.style.opacity = 1\r\n\t\tthis.delete.disabled = false\r\n\t\tthis.delete.style.opacity = 1\r\n\t}\r\n\r\n\tdisableButtons() {\r\n\t\tthis.play.disabled = true\r\n\t\tthis.play.style.opacity = 0.5\r\n\t\tthis.delete.disabled = true\r\n\t\tthis.delete.style.opacity = 0.5\r\n\t}\r\n\r\n\tsetBackgroundImage(element, img) {\r\n\t\telement.style.backgroundImage = `url(client/assets/images/${img})`\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/hero-selection.js?");

/***/ }),

/***/ "./src/components/hero-ui.js":
/*!***********************************!*\
  !*** ./src/components/hero-ui.js ***!
  \***********************************/
/*! exports provided: HeroUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HeroUI\", function() { return HeroUI; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nclass HeroUI {\r\n\t\r\n\tconstructor(game) {\r\n\t\tthis.game       = game\r\n\t\tthis.abilities  = game.self.abilities\r\n\t\tthis.props      = game.self.props\r\n\t\tthis.container  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroUI')\r\n\t\tthis.level      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroLevel')\r\n\t\tthis.exp        = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroExp')\r\n\t\tthis.gold  \t    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroGold')\r\n\t\tthis._abilities = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroAbilitiesUI')\r\n\t\tthis.attack     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroAttack')\r\n\t\tthis.defence    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('heroDefence')\r\n\t\tthis.health     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('health')\r\n\t\tthis.energy     = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('energy')\r\n\t\tthis.healthVal  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('healthValue')\r\n\t\tthis.energyVal  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('energyValue')\r\n\t\tthis.cooldowns  = {}\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.container.addEventListener('mouseover', () => {\r\n\t\t\tthis.game.mouse.hide()\r\n\t\t})\r\n\t\tthis.container.addEventListener('mouseout', () => {\r\n\t\t\tthis.game.mouse.show()\r\n\t\t})\r\n\t\tthis.container.oncontextmenu = ev => ev.preventDefault()\r\n\t\tlet ability, icon\r\n\t\tfor(let id in this.props.abilities) {\r\n\t\t\tability = this.props.abilities[id]\r\n\t\t\ticon    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('div.ability-icon')\r\n\t\t\tthis.setBackgroundImage(\r\n\t\t\t\ticon, ability.sprite\r\n\t\t\t)\r\n\t\t\tthis.cooldowns[ability.id] = icon\r\n\t\t\tthis._abilities.appendChild(icon)\r\n\t\t}\r\n\t\tthis.gold.addEventListener('click', () => {\r\n\t\t\tthis.game.shop.show()\r\n\t\t})\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n\r\n\t//Should check if state changed and only then update\r\n\tupdate() {\r\n\t\tthis.level.innerText   = this.props.level\r\n\t\tthis.exp.innerText     = this.props.experience + '/' + this.props.expToNextLevel\r\n\t\tthis.gold.innerText    = this.props.gold\r\n\t\tthis.attack.innerText  = this.props.attack\r\n\t\tthis.defence.innerText = this.props.defence\r\n\t\tthis.updateCooldowns()\r\n\t\tthis.setHealth()\r\n\t\tthis.setEnergy()    \r\n\t}\r\n\r\n\tupdateCooldowns() {\r\n\t\tlet cdr\r\n\t\tfor(let id in this.abilities) {\r\n\t\t\tcdr   = this.abilities[id].cooldownTimer\r\n\t\t\tif(cdr > 1) {\r\n\t\t\t\tthis.cooldowns[id].innerText = Math.ceil(cdr)\r\n\t\t\t} else if(cdr > 0) {\r\n\t\t\t\tthis.cooldowns[id].innerText = '0.' + Math.ceil(cdr * 10)\r\n\t\t\t} else {\r\n\t\t\t\tthis.cooldowns[id].innerText = ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetHealth() {\r\n\t\tconst health = parseInt(this.props.health),\r\n\t\t      width  = health / this.props.maxHealth * 100\r\n\t\tthis.healthVal.innerText = health + '/' + this.props.maxHealth\r\n\t\tthis.health.style.width = width + '%'\r\n\t}\r\n\r\n\tsetEnergy() {\r\n\t\tconst energy = parseInt(this.props.energy)\r\n\t\tthis.energyVal.innerText   = energy\r\n\t\tthis.energy.style.width    = energy + '%'\r\n\t}\r\n\r\n\tsetBackgroundImage(element, img) {\r\n\t\telement.style.backgroundImage = `url(client/assets/images/${img})`\r\n\t}\r\n\r\n}\n\n//# sourceURL=webpack:///./src/components/hero-ui.js?");

/***/ }),

/***/ "./src/components/login-screen.js":
/*!****************************************!*\
  !*** ./src/components/login-screen.js ***!
  \****************************************/
/*! exports provided: LoginScreen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LoginScreen\", function() { return LoginScreen; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nclass LoginScreen {\r\n\r\n\tconstructor(game) {\r\n\t\tthis.game = game\r\n\t\tthis.container = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('loginScreen')\r\n\t\tthis.username = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('loginUsername')\r\n\t\tthis.password = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('loginPassword')\r\n\t\tthis.submit = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('loginBtn')\r\n\t\tthis.link = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('showRegisterScreen')\r\n\t\tthis.errors = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('loginErrors')\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.submit.addEventListener('click', ev => {\r\n\t\t\tev.preventDefault()\r\n\t\t\tthis.trySubmit()\r\n\t\t})\r\n\t\tthis.link.addEventListener('click', ev => {\r\n\t\t\tev.preventDefault()\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.registerScreen.show()\r\n\t\t})\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.clear()\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\tdisplayError(error) {\r\n\t\tthis.errors.innerText = error\r\n\t}\r\n\r\n\tvalidate(username, password) {\r\n\t\tif(username.length == 0) {\r\n\t\t\tthis.displayError('Username is required')\r\n\t\t\treturn false\r\n\t\t} else if(password.length == 0) {\r\n\t\t\tthis.displayError('Password is required')\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\ttrySubmit() {\r\n\t\tconst username = this.username.value.trim(),\r\n\t\t\t  password = this.password.value.trim()\r\n\t\t\r\n\t\tthis.errors.value = ''\r\n\t\tif(this.validate(username, password)) {\r\n\t\t\tthis.send(username, password)\r\n\t\t}\r\n\t}\r\n\r\n\tsend(username, password) {\r\n\t\tthis.game.socket.emit('/player/login', {\r\n\t\t\tusername, password\r\n\t\t})\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.errors.innerText = ''\r\n\t\tthis.username.value = ''\r\n\t\tthis.password.value = ''\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tif(!data.success) {\r\n\t\t\tthis.clear()\r\n\t\t\tthis.displayError(data.message)\r\n\t\t} else {\r\n\t\t\tthis.game.username = this.username.value\r\n\t\t\tthis.clear()\r\n\t\t\tthis.game.ownedHeroes = data.ownedHeroes\r\n\t\t\tthis.game.heroSelection.init(data.ownedHeroes)\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.heroSelection.show()\r\n\t\t}\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/login-screen.js?");

/***/ }),

/***/ "./src/components/quest-ui.js":
/*!************************************!*\
  !*** ./src/components/quest-ui.js ***!
  \************************************/
/*! exports provided: QuestUI */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"QuestUI\", function() { return QuestUI; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nclass QuestUI {\r\n\r\n\tconstructor(game) {\r\n\t\tthis.game        = game\r\n\t\tthis.container   = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questScreen')\r\n\t\tthis.description = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questDescription')\r\n\t\tthis.gold        = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questGold')\r\n\t\tthis.experience  = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questExperience')\r\n\t\tthis.dragon      = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questName')\r\n\t\tthis.progress    = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('questProgress')\r\n\t\tthis.counter     = 0\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.container.addEventListener('mouseover', () => {\r\n\t\t\tthis.game.mouse.hide()\r\n\t\t})\r\n\t\tthis.container.addEventListener('mouseout', () => {\r\n\t\t\tthis.game.mouse.show()\r\n\t\t})\r\n\t\tthis.container.oncontextmenu = ev => ev.preventDefault()\r\n\t\tthis.setQuest(this.game.self.props.id_quest)\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\tonDragonKill(name) {\r\n\t\tconst id     = this.game.self.props.id_quest,\r\n\t\t      target = this.game.quests[id].dragon,\r\n\t\t      goal   = this.game.quests[id].amount\r\n\t\tif(name == target) {\r\n\t\t\tthis.counter++\r\n\t\t\tif(this.counter >= goal) {\r\n\t\t\t\tthis.counter = 0\r\n\t\t\t\tthis.alertQuestCompletition()\r\n\t\t\t\tthis.nextQuest()\r\n\t\t\t} else {\r\n\t\t\t\tthis.setQuestProgress(id, this.counter)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetQuest(id) {\r\n\t\tif(!this.game.quests[id]) {\r\n\t\t\tthis.container.style.display = 'none'\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.setQuestDescription(id)\r\n\t\tthis.setQuestRewards(id)\r\n\t\tthis.setQuestName(id)\r\n\t\tthis.setQuestProgress(id)\r\n\t}\r\n\r\n\tsetQuestDescription(id) {\r\n\t\tconst desc = this.game.quests[id].description\r\n\t\tthis.description.innerText = desc\r\n\t}\r\n\r\n\tsetQuestRewards(id) {\r\n\t\tconst gold = this.game.quests[id].gold,\r\n\t\t\t  exp  = this.game.quests[id].experience\r\n\t \tthis.gold.innerText = gold\r\n\t \tthis.experience.innerText = exp\r\n\t}\r\n\r\n\tsetQuestName(id) {\r\n\t\tconst name = this.game.quests[id].dragon\r\n\t\tthis.dragon.innerText = name\r\n\t}\r\n\r\n\tsetQuestProgress(id, val = 0) {\r\n\t\tconst goal = this.game.quests[id].amount\r\n\t\tthis.progress.innerText = val + ' / ' + goal\r\n\t}\r\n\r\n\talertQuestCompletition() {\r\n\t\talert('Quest completed!')\r\n\t}\r\n\r\n\talertVictoryScreen() {\r\n\t\talert('A humble victory screen (work in progress!)')\r\n\t}\r\n\r\n\tnextQuest() {\r\n\t\tconst id = this.game.self.props.id_quest + 1\r\n\t\tif(!this.game.quests[id]) {\r\n\t\t\tthis.alertVictoryScreen()\r\n\t\t\tthis.container.style.display = 'none'\r\n\t\t\tthis.game.socket.emit('gameWon', this.game.self.props.id)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.game.self.props.id_quest++\r\n\t\tthis.setQuest(this.game.self.props.id_quest)\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/quest-ui.js?");

/***/ }),

/***/ "./src/components/register-screen.js":
/*!*******************************************!*\
  !*** ./src/components/register-screen.js ***!
  \*******************************************/
/*! exports provided: RegisterScreen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RegisterScreen\", function() { return RegisterScreen; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\n\r\nclass RegisterScreen {\r\n\r\n\tconstructor(game) {\r\n\t\tthis.game = game\r\n\t\tthis.container = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerScreen')\r\n\t\tthis.email = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerEmail')\r\n\t\tthis.username = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerUsername')\r\n\t\tthis.password = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerPassword')\r\n\t\tthis.passwordConfirm = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerPasswordConfirm')\r\n\t\tthis.submit = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerBtn')\r\n\t\tthis.link = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('showLoginScreen')\r\n\t\tthis.errors = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('registerErrors')\r\n\t\tthis.init()\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.submit.addEventListener('click', ev => {\r\n\t\t\tev.preventDefault()\r\n\t\t\tthis.trySubmit()\r\n\t\t})\r\n\t\tthis.link.addEventListener('click', ev => {\r\n\t\t\tev.preventDefault()\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.loginScreen.show()\r\n\t\t})\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.clear()\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\tdisplayError(error) {\r\n\t\tthis.errors.innerText = error\r\n\t}\r\n\r\n\tvalidate(email, username, password, passwordConfirm) {\r\n\t\tif(email.length == 0) {\r\n\t\t\tthis.displayError('Email is required')\r\n\t\t\treturn false\r\n\t\t} else if(username.length == 0) {\r\n\t\t\tthis.displayError('Username is required')\r\n\t\t\treturn false\r\n\t\t} else if(password.length == 0) {\r\n\t\t\tthis.displayError('Password is required')\r\n\t\t\treturn false\r\n\t\t} else if(password != passwordConfirm) {\r\n\t\t\tthis.displayError('Passwords do not match')\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\r\n\ttrySubmit() {\r\n\t\tconst email = this.email.value.trim(),\r\n\t\t\t  username = this.username.value.trim(),\r\n\t\t\t  password = this.password.value.trim(),\r\n\t\t\t  passwordConfirm = this.passwordConfirm.value.trim()\r\n\t\tthis.errors.value = ''\r\n\t\tif(this.validate(email, username, password, passwordConfirm)) {\r\n\t\t\tthis.send(email, username, password)\r\n\t\t\tthis.clear()\r\n\t\t}\r\n\t}\r\n\r\n\tsend(email, username, password) {\r\n\t\tthis.game.socket.emit('/player/register', {\r\n\t\t\temail, username, password\r\n\t\t})\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.errors.innerText = ''\r\n\t\tthis.email.value = ''\r\n\t\tthis.username.value = ''\r\n\t\tthis.password.value = ''\r\n\t\tthis.passwordConfirm.value = ''\r\n\t}\r\n\r\n\tonEvent(data) {\r\n\t\tif(!data.success) {\r\n\t\t\tthis.displayError(data.message)\r\n\t\t} else {\r\n\t\t\tthis.hide()\r\n\t\t\tthis.game.loginScreen.show()\r\n\t\t}\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/register-screen.js?");

/***/ }),

/***/ "./src/components/shop.js":
/*!********************************!*\
  !*** ./src/components/shop.js ***!
  \********************************/
/*! exports provided: Shop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shop\", function() { return Shop; });\n/* harmony import */ var _util_dom_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/dom-functions */ \"./src/util/dom-functions.js\");\n\r\n\r\nconst items = {\r\n  health: [\r\n    [20, 1],\r\n    [30, 2],\r\n    [40, 3],\r\n    [50, 4],\r\n    [100, 5]\r\n  ]\r\n}\r\n\r\nclass Shop {\r\n\r\n  constructor(game) {\r\n    this.game = game\r\n    this.container = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('shopScreen')\r\n    this.hideShop = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"getById\"])('hideShopScreen')\r\n    this.items    = []\r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    this.container.addEventListener('mouseover', () => {\r\n\t\t\tthis.game.mouse.hide()\r\n\t\t})\r\n\t\tthis.container.addEventListener('mouseout', () => {\r\n\t\t\tthis.game.mouse.show()\r\n\t\t})\r\n    this.container.oncontextmenu = ev => ev.preventDefault()\r\n    this.hideShop.addEventListener('click', () => {\r\n      this.hide()\r\n    })\r\n    items.health.forEach(item => {\r\n      const p = Object(_util_dom_functions__WEBPACK_IMPORTED_MODULE_0__[\"make\"])('p')\r\n      p.innerHTML = `Restore ${item[0]}% of max HP<span>${item[1]}g</span>`\r\n      p.addEventListener('click', () => {\r\n        console.log('Trying to heal for ' + item[0] + '% HP, gold cost is ' + item[1] + 'g')\r\n        if(this.game.self.props.gold >= item[1]) {\r\n          const gainedHealth = (item[0] / 100) * this.game.self.props.maxHealth\r\n          console.log('Healed for ' + gainedHealth)\r\n          this.game.self.health += gainedHealth\r\n          this.game.self.props.gold -= item[1]\r\n        }\r\n      })\r\n      this.container.appendChild(p)\r\n    })\r\n  }\r\n\r\n  show() {\r\n\t\tthis.container.style.display = 'block'\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.container.style.display = 'none'\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/components/shop.js?");

/***/ }),

/***/ "./src/config/asset-sources.js":
/*!*************************************!*\
  !*** ./src/config/asset-sources.js ***!
  \*************************************/
/*! exports provided: ASSET_SOURCES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ASSET_SOURCES\", function() { return ASSET_SOURCES; });\nconst ASSET_SOURCES = {\r\n\timages: [\r\n\t\t'terrain_atlas.png', \r\n\t\t'warrior_m.png',\r\n\t\t'warrior_f.png',\r\n\t\t'healer_m.png',\r\n\t\t'healer_f.png',\r\n\t\t'mage_m.png',\r\n\t\t'mage_f.png',\r\n\t\t'ninja_m.png',\r\n\t\t'ninja_f.png',\r\n\t\t'ranger_m.png',\r\n\t\t'ranger_f.png',\r\n\t\t'townfolk1_m.png',\r\n\t\t'townfolk1_f.png',\r\n\t\t'Castle2.png',\r\n\t\t'PathAndObjects.png',\r\n\t\t'mountain_landscape.png',\r\n\t\t'plants.png',\r\n\t\t'tree-variations.png',\r\n\t\t'flying_dragon-red.png',\r\n\t\t'flying_dragon-gold.png',\r\n\t\t'flying_twin_headed_dragon-blue.png',\r\n\t\t'flying_twin_headed_dragon-red.png',\r\n\t\t'firebal.png',\r\n\t\t'player-basic-attack.png',\r\n\t\t'small-sword.png',\r\n\t\t'level-up.png',\r\n\t\t'healing-orb.png',\r\n\t\t'celerity.png',\r\n\t\t'spell_bluetop_1_1.png',\r\n\t\t'Ardentryst-arrow1.png',\r\n\t\t'Ardentryst-arrow2.png',\r\n\t\t'Ardentryst-arrow3.png',\r\n\t\t'sorc-aa.png',\r\n\t\t'ninja-aa.png',\r\n\t\t'ninja-a2.png',\r\n\t\t'ninja-a3.png',\r\n\t\t'healer-aa.png',\r\n\t\t'healer-a3.png',\r\n\t\t'warrior-aura.png',\r\n\t\t'warrior-aa.png',\r\n\t\t'warrior-a3.png'\r\n\t],\r\n\tsounds: [\r\n\t\t'ObservingTheStar.ogg',\r\n\t\t'TownTheme.mp3',\r\n\t\t'Soliloquy.mp3',\r\n\t\t'Caketown_1.mp3',\r\n\t\t'The Fall of Arcana.mp3',\r\n\t\t'Woodland Fantasy.mp3',\r\n\t\t'warrior-aa.wav',\r\n\t\t'archer-aa.ogg',\r\n\t\t'heal.ogg',\r\n\t\t'healer-aa.mp3',\r\n\t\t'level-up.ogg',\r\n\t\t'ninja-aa.wav',\r\n\t\t'sorc-aa.wav',\r\n\t\t'sorc-bolt.mp3'\r\n\t]\r\n}\n\n//# sourceURL=webpack:///./src/config/asset-sources.js?");

/***/ }),

/***/ "./src/config/character-animations.js":
/*!********************************************!*\
  !*** ./src/config/character-animations.js ***!
  \********************************************/
/*! exports provided: animations */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"animations\", function() { return animations; });\nconst animations = {\r\n\t'walk-up': [[1,0],[33,0],[65,0],[33,0]],\r\n\t'walk-right': [[1,36],[33,36],[65,36],[33,36]],\r\n\t'walk-down': [[1,72],[33,72],[65,72],[33,72]],\r\n\t'walk-left': [[1,108],[33,108],[65,108],[33,108]]\r\n}\n\n//# sourceURL=webpack:///./src/config/character-animations.js?");

/***/ }),

/***/ "./src/entities/abilities/abilities.js":
/*!*********************************************!*\
  !*** ./src/entities/abilities/abilities.js ***!
  \*********************************************/
/*! exports provided: ABILITIES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ABILITIES\", function() { return ABILITIES; });\n/* harmony import */ var _projectiles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./projectiles */ \"./src/entities/abilities/projectiles.js\");\n\r\n\r\nconst ABILITIES = {\r\n\t'Sword throw' : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"SwordThrow\"],\r\n\t'Fireball'    : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"Fireball\"],\r\n\t'Shuriken'    : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"Shuriken\"],\r\n\t'Arrow'       : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"Arrow\"],\r\n\t'Double arrow': _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"DoubleArrow\"],\r\n\t'Super arrow' : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"SuperArrow\"],\r\n\t'Energy ball' : _projectiles__WEBPACK_IMPORTED_MODULE_0__[\"EnergyBall\"]\r\n}\n\n//# sourceURL=webpack:///./src/entities/abilities/abilities.js?");

/***/ }),

/***/ "./src/entities/abilities/factory.js":
/*!*******************************************!*\
  !*** ./src/entities/abilities/factory.js ***!
  \*******************************************/
/*! exports provided: AbilityFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AbilityFactory\", function() { return AbilityFactory; });\n/* harmony import */ var _abilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./abilities */ \"./src/entities/abilities/abilities.js\");\n\r\n\r\nclass AbilityFactory {\r\n\r\n\tstatic makeAbilities(hero, keybinds) {\r\n\t\tlet   abilities        = {}\r\n\t\tconst abilitiesData    = hero.props.abilities,\r\n\t\t\t  triggerFunctions = AbilityFactory.generateTriggerFunctions(\r\n\t\t\t  \thero.game.keyboard.keys, hero.game.mouse.buttons,\r\n\t\t\t  \tkeybinds\r\n\t\t\t  )\r\n\r\n\t\tabilitiesData.forEach((props, i) => {\r\n\t\t\tabilities[props.id] = AbilityFactory.makeAbility(\r\n\t\t\t\thero, props, triggerFunctions[i]\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn abilities\r\n\t}\r\n\r\n\tstatic makeAbility(hero, props, triggerFunction) {\r\n\t\treturn new _abilities__WEBPACK_IMPORTED_MODULE_0__[\"ABILITIES\"][props.name](hero, props, triggerFunction)\r\n\t}\r\n\r\n\tstatic generateTriggerFunctions(keys, mouse, keybinds) {\r\n\t\tlet triggerFunctions = []\r\n\t\tfor(let ability in keybinds) {\r\n\t\t\ttriggerFunctions.push(() => {\r\n\t\t\t\tfor(let i = 0; i < keybinds[ability].length; i++) {\r\n\t\t\t\t\tif(keys[keybinds[ability][i]] || mouse[keybinds[ability][i]]) {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('Not triggered')\r\n\t\t\t\treturn false\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn triggerFunctions\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/abilities/factory.js?");

/***/ }),

/***/ "./src/entities/abilities/projectile.js":
/*!**********************************************!*\
  !*** ./src/entities/abilities/projectile.js ***!
  \**********************************************/
/*! exports provided: ProjectileEmiter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProjectileEmiter\", function() { return ProjectileEmiter; });\n/* harmony import */ var _tools_geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../tools/geometry */ \"./src/tools/geometry.js\");\n\r\n\r\n\r\nclass Projectile {\r\n\r\n\tconstructor(emiter, location, target) {\r\n\t\tthis.sprite            = emiter.props.sprite\r\n\t\tthis.width             = emiter.props.width\r\n\t\tthis.height            = emiter.props.height\r\n\t\tthis.halfWidth         = this.width / 2\r\n\t\tthis.halfHeight        = this.height / 2\r\n\t\tthis.location          = new _tools_geometry__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](location.X, location.Y)\r\n\t\tthis.renderer          = emiter.hero.game.renderer\r\n\t\tthis.cameraTopLeft     = emiter.hero.game.camera.topLeft\r\n\t\tthis.velocity          = new _tools_geometry__WEBPACK_IMPORTED_MODULE_0__[\"VectorFromPoints\"](location, target, true)\r\n\t\tthis.velocity.unit().multiply(emiter.props.speed)\r\n\t\tthis.travelledDistance = 0\r\n\t}\r\n\r\n\tboundingRect(offsetX = 0, offsetY = 0) {\r\n\t\treturn {\r\n\t\t\tX: this.location.X  - this.halfWidth  + offsetX, \r\n\t\t\tY: this.location.Y  - this.halfHeight + offsetY,\r\n\t\t\twidth : this.width  - offsetX * 2, \r\n\t\t\theight: this.height - offsetY * 2\r\n\t\t}\r\n\t}\r\n\r\n\thitbox(offset = 5) {\r\n\t\tconst offsetDoubled = 2 * offset\r\n\t\treturn {\r\n\t\t\tX     : this.location.X  - offset, \r\n\t\t\tY     : this.location.Y  - offset,\r\n\t\t\twidth : offsetDoubled, \r\n\t\t\theight: offsetDoubled\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.location.add(this.velocity)\r\n\t\tthis.travelledDistance += this.velocity.magnitude\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst p = _tools_geometry__WEBPACK_IMPORTED_MODULE_0__[\"Point\"].subtract(this.location, this.cameraTopLeft)\r\n\t\tthis.renderer.rotate(this.velocity.angle)\r\n\t\tthis.renderer.imageBasic(\r\n\t\t\tthis.sprite, \r\n\t\t\tparseInt(p.X), parseInt(p.Y), \r\n\t\t\tthis.width, this.height\t\r\n\t\t)\r\n\t}\r\n}\r\n\r\n//Use quadtree...\r\n\r\nclass ProjectileEmiter {\r\n\r\n\tconstructor(hero, props, triggerFunction) {\r\n\t\tthis.hero           = hero\r\n\t\tthis.game           = hero.game\r\n\t\tthis.camera         = hero.game.camera\r\n\t\tthis.mouse          = hero.game.mouse\r\n\t\tthis.soundManager   = hero.game.soundManager\r\n\t\tthis.socket         = hero.game.socket\r\n\t\tthis.props          = props\r\n\t\tthis.timeoutHandle  = null\r\n\t\tthis.cooldownTimer  = 0\r\n\t\tthis.instances      = {}\r\n\t\tthis.triggered      = triggerFunction\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tif(this.cooldownTimer <= 0 && this.triggered()) {\r\n\t\t\tthis.activate()\r\n\t\t}\t\r\n\t\tthis.updateInstances()\r\n\t\tlet instance, dragon\r\n\t\tfor(let ID in this.instances) {\r\n\t\t\tinstance = this.instances[ID]\r\n\t\t\tif(instance.travelledDistance > this.props._range) {\r\n\t\t\t\tthis.removeInstance(ID)\r\n\t\t\t\tthis.socket.emit('ability', {\r\n\t\t\t\t\theroID: this.hero.props.id,\r\n\t\t\t\t\tid    : this.props.id,\r\n\t\t\t\t\tdata  : { ID }\r\n\t\t\t\t})\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tfor(let dID in this.game.dragons) {\r\n\t\t\t\tdragon = this.game.dragons[dID]\r\n\t\t\t\tif(Object(_tools_geometry__WEBPACK_IMPORTED_MODULE_0__[\"rectCollision\"])(instance.hitbox(), dragon.hitbox())) {\r\n\t\t\t\t\tthis.removeInstance(ID)\r\n\t\t\t\t\tthis.socket.emit('ability', {\r\n\t\t\t\t\t\theroID: this.hero.props.id,\r\n\t\t\t\t\t\tid    : this.props.id,\r\n\t\t\t\t\t\tdata  : { ID }\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconst damage = this.props.damage * this.hero.props.attack + this.hero.props.bonusAttack\r\n\t\t\t\t\tthis.game.chat.appendMessage({\r\n\t\t\t\t\t\tactiveCard: 4,\r\n\t\t\t\t\t\tmessage   : `Did ${damage} damage to ${dragon.props.name}`\r\n\t\t\t\t\t}, true)\r\n\t\t\t\t\tthis.socket.emit('dragonHit', {\r\n\t\t\t\t\t\tname  : this.hero.props.name,\r\n\t\t\t\t\t\tID    : dID,\r\n\t\t\t\t\t\tdamage: damage\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateInstances() {\r\n\t\tfor(let ID in this.instances) {\r\n\t\t\tthis.instances[ID].update()\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tfor(let ID in this.instances) {\r\n\t\t\tthis.instances[ID].render()\r\n\t\t}\r\n\t}\r\n\r\n\tactivate() {\r\n\t\tthis.cooldownTimer = this.props.cooldown\r\n\t\tif(this.timeoutHandle) {\r\n\t\t\tclearTimeout(this.timeoutHandle)\r\n\t\t}\r\n\t\tthis.tickCooldown()\r\n\t\tthis.shootProjectile()\r\n\t}\r\n\r\n\ttickCooldown() {\r\n\t\tif(this.cooldownTimer <= 0) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.timeoutHandle = setTimeout(() => {\r\n\t\t\tthis.cooldownTimer -= 0.1\r\n\t\t\tthis.tickCooldown()\r\n\t\t}, 100)\r\n\t}\r\n\r\n\tshootProjectile() {\r\n\t\tconst target   = {X: this.mouse.worldX, Y: this.mouse.worldY},\r\n\t\t\t  location = {X: this.hero.props.X, Y: this.hero.props.Y},\r\n\t\t\t  ID       = Math.random()\r\n\t\tthis.addInstance({ \r\n\t\t\tID, location, target \r\n\t\t})\r\n\t\tthis.socket.emit('ability', {\r\n\t\t\theroID: this.hero.props.id,\r\n\t\t\tid    : this.props.id,\r\n\t\t\tdata  : { ID, location, target }\r\n\t\t})\r\n\t}\r\n\r\n\taddInstance(data) {\r\n\t\tthis.instances[data.ID] = new Projectile(\r\n\t\t\tthis, data.location, data.target\r\n\t\t)\r\n\t\tif(this.props.sound && this.camera.containsPoint(data.location)) {\r\n\t\t\tthis.soundManager.play(this.props.sound)\r\n\t\t}\r\n\t}\r\n\r\n\tremoveInstance(ID) {\r\n\t\tdelete this.instances[ID]\r\n\t}\r\n\r\n\tprocessPackage(pack) {\r\n\t\tif(pack.data.location) {\r\n\t\t\tthis.addInstance(pack.data)\r\n\t\t} else {\r\n\t\t\tthis.removeInstance(pack.data.ID)\r\n\t\t}\r\n\t}\r\n\r\n\tsetTrigger(triggerFunction) {\r\n\t\tthis.triggered = triggerFunction\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/abilities/projectile.js?");

/***/ }),

/***/ "./src/entities/abilities/projectiles.js":
/*!***********************************************!*\
  !*** ./src/entities/abilities/projectiles.js ***!
  \***********************************************/
/*! exports provided: SwordThrow, Fireball, Shuriken, Arrow, DoubleArrow, SuperArrow, EnergyBall */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SwordThrow\", function() { return SwordThrow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fireball\", function() { return Fireball; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shuriken\", function() { return Shuriken; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Arrow\", function() { return Arrow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DoubleArrow\", function() { return DoubleArrow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SuperArrow\", function() { return SuperArrow; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EnergyBall\", function() { return EnergyBall; });\n/* harmony import */ var _projectile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./projectile */ \"./src/entities/abilities/projectile.js\");\n\r\n\r\nclass SwordThrow  extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass Fireball    extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass Shuriken    extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass Arrow       extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass DoubleArrow extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass SuperArrow  extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\nclass EnergyBall  extends _projectile__WEBPACK_IMPORTED_MODULE_0__[\"ProjectileEmiter\"] {}\r\n\n\n//# sourceURL=webpack:///./src/entities/abilities/projectiles.js?");

/***/ }),

/***/ "./src/entities/dragon.js":
/*!********************************!*\
  !*** ./src/entities/dragon.js ***!
  \********************************/
/*! exports provided: Dragon */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Dragon\", function() { return Dragon; });\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer */ \"./src/entities/renderer.js\");\n\r\n\r\nclass Dragon {\r\n\r\n\tconstructor(game, props) {\r\n\t\tthis.game       = game\r\n\t\tthis.props      = Object.assign({}, props, {\r\n\t\t\thalfWidth : props.width  / 2,\r\n\t\t\thalfHeight: props.height / 2\r\n\t\t})\r\n\t\tthis.animations = props.animations\r\n\t\tthis.renderer   = new _renderer__WEBPACK_IMPORTED_MODULE_0__[\"DragonRenderer\"](this)\r\n\t}\r\n\r\n\tboundingRect(offsetX = 0, offsetY = 0) {\r\n\t\treturn {\r\n\t\t\tX: this.props.X - this.props.halfWidth  + offsetX, \r\n\t\t\tY: this.props.Y - this.props.halfHeight + offsetY,\r\n\t\t\twidth : this.props.width  - offsetX * 2,\r\n\t\t\theight: this.props.height - offsetY * 2\r\n\t\t}\r\n\t}\r\n\r\n\thitbox(offset = 10) {\r\n\t\tconst offsetDoubled = 2 * offset\r\n\t\treturn {\r\n\t\t\tX     : this.props.X  - offset, \r\n\t\t\tY     : this.props.Y  - offset,\r\n\t\t\twidth : offsetDoubled, \r\n\t\t\theight: offsetDoubled\r\n\t\t}\r\n\t}\r\n\r\n\tsetProps(props) {\r\n\t\tfor(let key in props) {\r\n\t\t\tthis.props[key] = props[key]\r\n\t\t}\r\n\t}\r\n\r\n\tisInCamera() {\r\n\t\tconst topLeft      = this.game.camera.topLeft,\r\n\t\t\t  screenWidth  = this.game.renderer.canvas.width,\r\n\t\t\t  screenHeight = this.game.renderer.canvas.height\r\n\r\n\t\treturn (this.props.X + this.props.width > topLeft.X  && \r\n\t\t\t\tthis.props.X < topLeft.X + screenWidth       &&\r\n\t\t   \t\tthis.props.Y + this.props.height > topLeft.Y && \r\n\t\t   \t\tthis.props.Y < topLeft.Y + screenHeight)\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(!this.isInCamera()) return\r\n\t\tthis.renderer.render()\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/dragon.js?");

/***/ }),

/***/ "./src/entities/fireball.js":
/*!**********************************!*\
  !*** ./src/entities/fireball.js ***!
  \**********************************/
/*! exports provided: Fireball */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Fireball\", function() { return Fireball; });\nclass Fireball {\r\n\r\n\tconstructor(game, props) {\r\n\t\tthis.game       \t  = game\r\n\t\tthis.ID               = props.ID\r\n\t\tthis.location         = props.location\r\n\t\tthis.velocity         = props.velocity\r\n\t\tthis.speed            = props.speed\r\n\t\tthis.damage           = props.damage\r\n\t\tthis.range            = props.range\r\n\t\tthis.name             = props.name\r\n\t\tthis.travelledDistance = 0 \r\n\t\tthis.width            = 30\r\n\t\tthis.height           = 26\r\n\t\tthis.sprite           = 'firebal.png'\r\n\t}\r\n\r\n\tget X() { return this.location.X }\r\n\tget Y() { return this.location.Y }\r\n\r\n\tupdate() {\r\n\t\tthis.location.X        += this.velocity.X\r\n\t\tthis.location.Y        += this.velocity.Y\r\n\t\tthis.travelledDistance += this.speed\r\n\t\tif(this.shouldDie()) {\r\n\t\t\tthis.die()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif(this.hasHitPlayer(this.game.self)) {\r\n\t\t\tthis.doDamageTo(this.game.self)\r\n\t\t\tthis.game.socket.emit('fireballDeath', this.ID)\r\n\t\t\tthis.die()\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst renderer = this.game.renderer\r\n\t\trenderer.image(\r\n\t\t\tthis.sprite, \r\n\t\t\t10, 11,\r\n\t\t\tthis.width, this.height,\r\n\t\t\tparseInt(this.X - 15 - this.game.camera.topLeft.X), \r\n\t\t\tparseInt(this.Y - 13 - this.game.camera.topLeft.Y)\r\n\t\t)\r\n\t}\r\n\r\n\thasHitPlayer(hero) {\r\n\t\treturn Math.abs(this.X - hero.props.X) < 30 && Math.abs(this.Y - hero.props.Y) < 30\r\n\t}\r\n\r\n\tdoDamageTo(hero) {\r\n\t\tconst damageToDo = this.damage * (100 - (hero.props.defence + hero.props.bonusDefence)) / 100\r\n\t\tif(damageToDo < 0) return\r\n\t\thero.health -= damageToDo\r\n\t\tthis.game.chat.appendMessage({\r\n\t\t\tactiveCard: 4,\r\n\t\t\tmessage   : `Took ${damageToDo} damage from ${this.name}`\r\n\t\t}, true)\r\n\t}\r\n\r\n\tshouldDie() {\r\n\t\treturn this.travelledDistance > this.range\r\n\t}\r\n\r\n\tdie() {\r\n\t\tdelete this.game.fireballs[this.ID]\r\n\t}\r\n}\r\n\n\n//# sourceURL=webpack:///./src/entities/fireball.js?");

/***/ }),

/***/ "./src/entities/hero.js":
/*!******************************!*\
  !*** ./src/entities/hero.js ***!
  \******************************/
/*! exports provided: Hero */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Hero\", function() { return Hero; });\n/* harmony import */ var _config_character_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/character-animations */ \"./src/config/character-animations.js\");\n/* harmony import */ var _movement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./movement */ \"./src/entities/movement.js\");\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderer */ \"./src/entities/renderer.js\");\n/* harmony import */ var _properties_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./properties-manager */ \"./src/entities/properties-manager.js\");\n/* harmony import */ var _abilities_factory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./abilities/factory */ \"./src/entities/abilities/factory.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst keybinds = {\r\n\t'Ability1': ['RMB', '1'],\r\n\t'Ability2': ['2'],\r\n\t'Ability3': ['3'],\r\n\t'Ability4': ['4'],\r\n\t'Ability5': ['5']\r\n}\r\n\r\nclass Hero {\r\n\r\n\tconstructor(game, props) {\r\n\t\tthis.game\t\t\t = game\r\n\t\tthis.props           = props\r\n\t\tthis.movementManager = new _movement__WEBPACK_IMPORTED_MODULE_1__[\"BasicMovement\"](this)\r\n\t\tthis.renderer        = new _renderer__WEBPACK_IMPORTED_MODULE_2__[\"HeroRenderer\"](this)\r\n\t\tthis.propsManager    = new _properties_manager__WEBPACK_IMPORTED_MODULE_3__[\"PropertiesManager\"](this)\r\n\t\tthis.animations      = _config_character_animations__WEBPACK_IMPORTED_MODULE_0__[\"animations\"]\r\n\t\tthis.abilities       = _abilities_factory__WEBPACK_IMPORTED_MODULE_4__[\"AbilityFactory\"].makeAbilities(this, keybinds)\r\n\t}\r\n\r\n\tset health(value) {\r\n\t\tif(value < 0) {\r\n\t\t\tthis.props.health = 1\r\n\t\t\tthis.respawn()\r\n\t\t} else {\r\n\t\t\tthis.props.health = value\r\n\t\t\tif(this.props.health > this.props.maxHealth) {\r\n\t\t\t\tthis.props.health = this.props.maxHealth\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tget health() { return this.props.health }\r\n\r\n\tupdate() {\r\n\t\tthis.movementManager.update()\r\n\t\tfor(let id in this.abilities) {\r\n\t\t\tthis.abilities[id].update()\r\n\t\t}\r\n\t\t// console.log(this.props.health, this.props.maxHealth * this.props.healthRegen)\r\n\t\tthis.health += this.props.maxHealth * this.props.healthRegen\r\n\t}\r\n\r\n\r\n\t//For other heroes\r\n\tupdateAbilitiesInstances() {\r\n\t\tfor(let id in this.abilities) {\r\n\t\t\tthis.abilities[id].updateInstances()\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.renderer.render()\r\n\t\tfor(let id in this.abilities) {\r\n\t\t\tthis.abilities[id].render()\r\n\t\t}\r\n\t}\r\n\r\n\tgetProps(initial = false) {\r\n\t\treturn this.propsManager.getProps(initial)\r\n\t}\r\n\r\n\tsetProps(props) {\r\n\t\tthis.propsManager.setProps(props)\r\n\t}\r\n\r\n\tboundingRect(offsetX = 0, offsetY = 0) {\r\n\t\treturn {\r\n\t\t\tX: this.props.X - this.props.hWidth  + offsetX, \r\n\t\t\tY: this.props.Y - this.props.hHeight + offsetY + 10, \r\n\t\t\twidth : this.props.width  - 2 * offsetX, \r\n\t\t\theight: this.props.height - 2 * offsetY\r\n\t\t}\r\n\t}\r\n\r\n\tparseDragonRewards(data) {\r\n\t\tthis.props.gold       += data.gold\r\n\t\tthis.props.experience += data.experience\r\n\t\tif(this.props.experience >= this.props.expToNextLevel) {\r\n\t\t\tthis.levelUp()\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tstatic propsPerLevel(baseStats, level) {\r\n\t\tconst maxHealth = baseStats.base_health + 500 * (level - 1)\r\n\t\treturn {\r\n\t\t\tattack        : level * baseStats.base_attack,\r\n\t\t\tdefence       : level * 2 + baseStats.base_defence,\r\n\t\t\tmaxHealth     : maxHealth,\r\n\t\t\texpToNextLevel: 1500 + (level - 1) * 500,\r\n\t\t\thealth        : maxHealth\r\n\t\t}\r\n\t}\r\n\r\n\tstatic makeHero(activeStats, game) {\r\n\t\t\tconsole.log(activeStats)\r\n\t\t\tconst baseStats    = game.heroesData[activeStats.type],\r\n\t\t\t\t  defaultStats = {\r\n\t\t\twidth            : 32,\r\n\t\t\theight           : 36,\r\n\t\t\thWidth           : 16,\r\n\t\t\thHeight          : 18,\r\n\t\t\tframe            : activeStats.frame ? activeStats.frame : 0, \r\n\t\t\tinterval         : activeStats.interval ? activeStats.interval : 300, \r\n\t\t\tactiveAnimation  : activeStats.activeAnimation ? activeStats.activeAnimation : 'walk-right', \r\n\t\t\ttime             : 0,\r\n\t\t\tspeed            : baseStats.base_mobility / 100 * 1 + 1,\r\n\t\t\tbonusAttack\t\t : 0,\r\n\t\t\tbonusDefence     : 0,\r\n\t\t\tbonusRunningSpeed: 1,\r\n\t\t\tenergy           : 100,\r\n\t\t\thealthRegen      : 0.00001,\r\n\t\t\tcanMove          : true,\r\n\t\t\tinfoColor        : activeStats.infoColor ? activeStats.infoColor : 'white',\r\n\t\t\tlevelUpAura      : false,\r\n\t\t}\t\r\n\t\tconst props = Object.assign(\r\n\t\t\t{}, baseStats, activeStats, defaultStats, \r\n\t\t\tHero.propsPerLevel(baseStats, activeStats.level)\r\n\t\t)\r\n\t\tprops.health = activeStats.health\r\n\t\treturn new Hero(game, props)\r\n\t}\r\n\r\n\tlevelUp() {\r\n\t\twhile(this.props.experience >= this.props.expToNextLevel) {\r\n\t\t\tthis.props.experience -= this.props.expToNextLevel\r\n\t\t\tthis.props.level++\r\n\t\t}\r\n\t\tthis.setProps(Hero.propsPerLevel(this.props, this.props.level))\r\n\t\tthis.props.levelUpAura = true\r\n\t\tthis.game.soundManager.play('level-up.ogg')\r\n\t\tsetTimeout(() => this.props.levelUpAura = false, 1500)\r\n\t}\r\n\r\n\trespawn() {\r\n\t\tconst location = this.findClosestCamp()\r\n\t\tthis.props.X = location.X\r\n\t\tthis.props.Y = location.Y\r\n\t}\r\n\r\n\tfindClosestCamp() {\r\n\t\treturn { X: 300, Y: 9600 }\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/hero.js?");

/***/ }),

/***/ "./src/entities/movement.js":
/*!**********************************!*\
  !*** ./src/entities/movement.js ***!
  \**********************************/
/*! exports provided: BasicMovement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"BasicMovement\", function() { return BasicMovement; });\nclass BasicMovement {\r\n\r\n\tconstructor(hero) {\r\n\t\tthis.hero     = hero\r\n\t\tthis.keys     = hero.game.keyboard.keys\r\n\t\tthis.speed    = hero.props.speed\r\n\t\tthis.brSpeed  = hero.props.bonusRunningSpeed\r\n\t\tthis.map      = hero.game.map\r\n\t\tthis.shift    = false\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tif(this.hero.props.canMove) {\r\n\t\t\tconst speed    = this.getSpeed(),\r\n\t\t      velocity = this.getVelocity(speed)\r\n\t\t\tif(this.hero.props.energy < 100) {\r\n\t\t\t\tthis.hero.props.energy += 0.1\r\n\t\t\t}\r\n\t\t\t this.updateHeroAnimation(velocity)\r\n\t\t\t this.checkMapCollision(velocity)\r\n\t\t\t.then(v => {\r\n\t\t\t\tif(this.hero.props.canMove) {\r\n\t\t\t\t\tthis.setHeroPosition(v)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetSpeed() {\r\n\t\tlet speed = this.speed\r\n\t\tif(this.keys[' '] && this.hero.props.energy > 0) {\r\n\t\t\tspeed += this.brSpeed\r\n\t\t\tthis.hero.props.energy -= 0.5\r\n\t\t\tthis.shift = true\r\n\t\t} else {\r\n\t\t\tthis.shift = false\r\n\t\t}\r\n\t\treturn speed\r\n\t}\r\n\t\r\n\tgetVelocity(speed) {\r\n\t\tlet velocity = [0, 0]\r\n\t\tif(this.keys['w'] || this.keys['W'] || this.keys['ArrowUp']) {\r\n\t\t\tvelocity[1] = -speed\r\n\t\t} else if(this.keys['s'] || this.keys['S'] || this.keys['ArrowDown']) {\r\n\t\t\tvelocity[1] = speed\r\n\t\t} else if(this.keys['a'] || this.keys['A'] || this.keys['ArrowLeft']) {\r\n\t\t\tvelocity[0] = -speed\r\n\t\t} else if(this.keys['d'] || this.keys['D'] || this.keys['ArrowRight']) {\r\n\t\t\tvelocity[0] = speed\r\n\t\t}\r\n\t\treturn velocity\r\n\t}\r\n\r\n\tupdateHeroAnimation(velocity) {\r\n\t\tif(velocity[0] != 0 || velocity[1] != 0) {\r\n\t\t\tconst newAnimation = this.calculateNewAnimation(velocity)\r\n\t\t\tif(newAnimation != this.hero.props.activeAnimation) {\r\n\t\t\t\tthis.setHeroAnimation(newAnimation)\r\n\t\t\t\tthis.resetHeroAnimationFrame()\r\n\t\t\t}\r\n\t\t\tthis.updateHeroAnimationTime()\r\n\t\t} else {\r\n\t\t\tthis.resetHeroAnimationFrame()\r\n\t\t}\r\n\t}\r\n\r\n\tcheckMapCollision(velocity) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst tiles = this.map.getTilesInTheWay(\r\n\t\t\t\tthis.hero.boundingRect(10, 10), [velocity[0], velocity[1]]\r\n\t\t\t)\r\n\t\t\tif(velocity[0] > 0) {\r\n\t\t\t\tif(tiles.right.indexOf(2) != -1) velocity[0] = 0\r\n\t\t\t} else if(velocity[0] < 0) {\r\n\t\t\t\tif(tiles.left.indexOf(2) != -1) velocity[0] = 0\r\n\t\t\t}\r\n\t\t\tif(velocity[1] > 0) {\r\n\t\t\t\tif(tiles.bottom.indexOf(2) != -1) velocity[1] = 0\r\n\t\t\t} else if(velocity[1] < 0) {\r\n\t\t\t\tif(tiles.top.indexOf(2) != -1) velocity[1] = 0\r\n\t\t\t}\r\n\t\t\tresolve(velocity)\r\n\t\t})\r\n\t}\r\n\r\n\tupdateHeroAnimationTime() {\r\n\t\tif(this.shift) {\r\n\t\t\tthis.hero.props.time += 16 * 2\r\n\t\t} else {\r\n\t\t\tthis.hero.props.time += 16\r\n\t\t}\r\n\t\tif(this.hero.props.time >= this.hero.props.interval) {\r\n\t\t\tthis.hero.props.time = 0\r\n\t\t\tthis.hero.props.frame++\r\n\t\t\tconst animation = this.hero.props.activeAnimation\r\n\t\t\tif(this.hero.props.frame >= this.hero.animations[animation].length) {\r\n\t\t\t\tthis.hero.props.frame = 0\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcalculateNewAnimation(velocity) {\r\n\t\tif     (velocity[0] > 0) return 'walk-right'\r\n\t\telse if(velocity[0] < 0) return 'walk-left'\r\n\t\telse if(velocity[1] > 0) return 'walk-down'\r\n\t\telse if(velocity[1] < 0) return 'walk-up'\r\n\t}\r\n\r\n\tresetHeroAnimationFrame() {\r\n\t\tthis.hero.props.frame = 0\r\n\t\tthis.hero.props.time  = 0\r\n\t}\r\n\r\n\tsetHeroAnimation(newAnimation) {\r\n\t\tthis.hero.props.activeAnimation = newAnimation\r\n\t}\r\n\r\n\tsetHeroPosition(velocity) {\r\n\t\tthis.hero.props.X += velocity[0]\r\n\t\tthis.hero.props.Y += velocity[1]\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/movement.js?");

/***/ }),

/***/ "./src/entities/properties-manager.js":
/*!********************************************!*\
  !*** ./src/entities/properties-manager.js ***!
  \********************************************/
/*! exports provided: PropertiesManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PropertiesManager\", function() { return PropertiesManager; });\nclass PropertiesManager {\r\n\r\n\tconstructor(hero) {\r\n\t\tthis.hero = hero\r\n\t\tthis.props = hero.props\r\n\t}\r\n\r\n\tsetProps(props) {\r\n\t\tfor(let key in props) {\r\n\t\t\tthis.hero.props[key] = props[key]\r\n\t\t}\r\n\t}\r\n\r\n\tgetProps(initial = false) {\r\n\t\tlet props = {\r\n\t\t\tid: this.props.id, X: this.props.X, Y: this.props.Y,\r\n\t\t\tactiveAnimation: this.props.activeAnimation,\r\n\t\t\tframe: this.props.frame, level: this.props.level,\r\n\t\t\texperience: this.props.experience, health: this.props.health,\r\n\t\t\tgold: this.props.gold, id_quest: this.props.id_quest \r\n\t\t}\r\n\t\tif(initial) {\r\n\t\t\tprops = Object.assign({}, props, {\r\n\t\t\t\tinfoColor: this.props.infoColor,\r\n\t\t\t\tinterval: this.props.interval,\r\n\t\t\t\ttype: this.props.type, name: this.props.name\r\n\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn props\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/properties-manager.js?");

/***/ }),

/***/ "./src/entities/renderer.js":
/*!**********************************!*\
  !*** ./src/entities/renderer.js ***!
  \**********************************/
/*! exports provided: HeroRenderer, DragonRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HeroRenderer\", function() { return HeroRenderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DragonRenderer\", function() { return DragonRenderer; });\nclass HeroRenderer {\r\n\r\n\tconstructor(hero) {\r\n\t\tthis.hero     = hero\r\n\t\tthis.renderer = hero.game.renderer\r\n\t\tthis.topLeft  = hero.game.camera.topLeft\r\n\t\tthis.sprite   = hero.props.sprite\r\n\t\tthis.hWidth   = hero.props.width / 2\r\n\t\tthis.hHeight  = hero.props.height / 2\r\n\t\tthis.width    = hero.props.width\r\n\t\tthis.height   = hero.props.height\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.hero.props.levelUpAura) {\r\n\t\t\tthis.renderLevelUpAura()\r\n\t\t}\r\n\t\tthis.renderHeroSprite()\r\n\t\tthis.renderHeroHealthBar()\r\n\t\tthis.renderHeroInfo()\r\n\t}\r\n\r\n\trenderHeroSprite() {\r\n\t\tconst     frame = this.hero.props.frame\r\n\t\tconst animation = this.hero.animations[this.hero.props.activeAnimation]  \r\n\t\tthis.renderer.image(\r\n\t\t\tthis.sprite,\r\n\t\t\tanimation[frame][0], animation[frame][1],\r\n\t\t\tthis.width, this.height,\r\n\t\t\tthis.heroTopLeftX, this.heroTopLeftY\r\n\t\t)\r\n\t}\r\n\r\n\tget heroX() {\r\n\t\treturn parseInt(this.hero.props.X - this.topLeft.X)\r\n\t}\r\n\r\n\tget heroY() {\r\n\t\treturn parseInt(this.hero.props.Y - this.topLeft.Y)\r\n\t}\r\n\r\n\tget heroTopLeftX() {\r\n\t\treturn parseInt(this.heroX - this.hWidth)\r\n\t}\r\n\r\n\tget heroTopLeftY() {\r\n\t\treturn parseInt(this.heroY - this.hHeight)\r\n\t}\r\n\r\n\trenderHeroHealthBar() {\r\n\t\tconst width = this.hero.props.health / this.hero.props.maxHealth * 35\r\n\t\tthis.renderer.fillRect(\r\n\t\t\tthis.heroX - 20, this.heroTopLeftY - 9,\r\n\t\t\t35, 5, 'white'\r\n\t\t)\r\n\t\tthis.renderer.fillRect(\r\n\t\t\tthis.heroX - 20, this.heroTopLeftY - 9,\r\n\t\t\twidth, 5, 'red'\r\n\t\t)\r\n\t}\r\n\r\n\trenderHeroInfo() {\r\n\t\tthis.renderer.text(this.hero.props.name, this.heroX, this.heroTopLeftY - 18, {\r\n\t\t\tfill : this.hero.props.infoColor,\r\n\t\t\tfontFamily : 'Arial',\r\n\t\t\tfontSize   : '12px'\r\n\t\t})\r\n\t}\r\n\r\n\trenderLevelUpAura() {\r\n\t\tthis.renderer.image(\r\n\t\t\t'level-up.png',\r\n\t\t\t0, 0, 80, 120,\r\n\t\t\tthis.heroX - 45,\r\n\t\t\tthis.heroTopLeftY - 70,\r\n\t\t\t90, 120\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass DragonRenderer {\r\n\r\n\tconstructor(dragon) {\r\n\t\tthis.dragon   = dragon\r\n\t\tthis.renderer = dragon.game.renderer\r\n\t\tthis.topLeft  = dragon.game.camera.topLeft\r\n\t\tthis.sprite   = dragon.props.sprite\r\n\t\tthis.hWidth   = dragon.props.width / 2\r\n\t\tthis.hHeight  = dragon.props.height / 2\r\n\t\tthis.width    = dragon.props.width\r\n\t\tthis.height   = dragon.props.height\r\n\t}\r\n\r\n\tget dragonX() {\r\n\t\treturn parseInt(this.dragon.props.X - this.topLeft.X)\r\n\t}\r\n\r\n\tget dragonY() {\r\n\t\treturn parseInt(this.dragon.props.Y - this.topLeft.Y)\r\n\t}\r\n\r\n\tget dragonTopLeftX() {\r\n\t\treturn parseInt(this.dragonX - this.hWidth)\r\n\t}\r\n\r\n\tget dragonTopLeftY() {\r\n\t\treturn parseInt(this.dragonY - this.hHeight)\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.renderDragonSprite()\r\n\t\tthis.renderDragonHealthBar()\r\n\t\tthis.renderDragonHealthPoints()\r\n\t\tthis.renderDragonInfo()\r\n\t}\r\n\r\n\trenderDragonSprite() {\r\n\t\tconst     frame = this.dragon.props.frame,\r\n\t\t      animation = this.dragon.animations[this.dragon.props.activeAnimation]  \r\n\t\tthis.renderer.image(\r\n\t\t\tthis.sprite,\r\n\t\t\tanimation[frame][0], animation[frame][1],\r\n\t\t\tthis.width, this.height,\r\n\t\t\tthis.dragonTopLeftX, this.dragonTopLeftY\r\n\t\t)\r\n\t}\r\n\r\n\trenderDragonHealthBar() {\r\n\t\tconst width = this.dragon.props.health / this.dragon.props.max_health * 80\r\n\t\tthis.renderer.fillRect(\r\n\t\t\tthis.dragonX - 40, this.dragonTopLeftY - 9,\r\n\t\t\t80, 10, 'white'\r\n\t\t)\r\n\t\tthis.renderer.fillRect(\r\n\t\t\tthis.dragonX - 40, this.dragonTopLeftY - 9,\r\n\t\t\twidth, 10, 'red'\r\n\t\t)\r\n\t}\r\n\r\n\trenderDragonHealthPoints() {\r\n\t\tthis.renderer.text(parseInt(this.dragon.props.health), this.dragonX, this.dragonTopLeftY + 10, {\r\n\t\t\tfill: 'white',\r\n\t\t\tfontFamily : 'Arial',\r\n\t\t\tfontSize   : '12px'\r\n\t\t})\r\n\t}\r\n\r\n\trenderDragonInfo() {\r\n\t\tthis.renderer.text(this.dragon.props.name, this.dragonX, this.dragonTopLeftY - 28, {\r\n\t\t\tfill       : 'white',\r\n\t\t\tfontFamily : 'Arial',\r\n\t\t\tfontSize   : '12px'\r\n\t\t})\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/entities/renderer.js?");

/***/ }),

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/*! exports provided: Game */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return Game; });\n/* harmony import */ var _tools_renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools/renderer */ \"./src/tools/renderer.js\");\n/* harmony import */ var _tools_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tools/map */ \"./src/tools/map.js\");\n/* harmony import */ var _tools_camera__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tools/camera */ \"./src/tools/camera.js\");\n/* harmony import */ var _tools_keyboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tools/keyboard */ \"./src/tools/keyboard.js\");\n/* harmony import */ var _tools_mouse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tools/mouse */ \"./src/tools/mouse.js\");\n/* harmony import */ var _tools_sound_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./tools/sound-manager */ \"./src/tools/sound-manager.js\");\n/* harmony import */ var _tools_movable_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tools/movable-dom */ \"./src/tools/movable-dom.js\");\n/* harmony import */ var _entities_dragon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./entities/dragon */ \"./src/entities/dragon.js\");\n/* harmony import */ var _entities_fireball__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./entities/fireball */ \"./src/entities/fireball.js\");\n/* harmony import */ var _entities_hero__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./entities/hero */ \"./src/entities/hero.js\");\n/* harmony import */ var _config_asset_sources__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./config/asset-sources */ \"./src/config/asset-sources.js\");\n/* harmony import */ var _components_login_screen__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/login-screen */ \"./src/components/login-screen.js\");\n/* harmony import */ var _components_register_screen__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./components/register-screen */ \"./src/components/register-screen.js\");\n/* harmony import */ var _components_chat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./components/chat */ \"./src/components/chat.js\");\n/* harmony import */ var _components_hero_creation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./components/hero-creation */ \"./src/components/hero-creation.js\");\n/* harmony import */ var _components_hero_selection__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./components/hero-selection */ \"./src/components/hero-selection.js\");\n/* harmony import */ var _components_hero_ui__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./components/hero-ui */ \"./src/components/hero-ui.js\");\n/* harmony import */ var _components_quest_ui__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./components/quest-ui */ \"./src/components/quest-ui.js\");\n/* harmony import */ var _components_shop__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./components/shop */ \"./src/components/shop.js\");\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./client */ \"./src/client.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import { Warrior } from './entities/warrior'\r\n// import { Ninja } from './entities/ninja'\r\n// import { Archer } from './entities/archer'\r\n// import { Mage } from './entities/mage'\r\n// import { Healer } from './entities/healer'\r\n\r\n\r\n\r\n\r\n// import { ANIMATIONS } from './config/animations'\r\n// import { MAP_DATA } from './config/map-data'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Game {\r\n\r\n\tconstructor(socket, PIXI) {\r\n\t\tthis.socket         = socket\r\n\t\tthis.heroesData     = []\r\n\t\tthis.ownedHeroes    = []\r\n\t\tthis.client         = new _client__WEBPACK_IMPORTED_MODULE_19__[\"Client\"](this, socket)\r\n\t\tthis.soundManager   = new _tools_sound_manager__WEBPACK_IMPORTED_MODULE_5__[\"SoundManager\"]()\r\n\t\tthis.renderer       = new _tools_renderer__WEBPACK_IMPORTED_MODULE_0__[\"Renderer\"](PIXI, {width: 1200, height: 750})\r\n\t\tthis.chat           = new _components_chat__WEBPACK_IMPORTED_MODULE_13__[\"Chat\"](this)\r\n\t\tthis.shop           = new _components_shop__WEBPACK_IMPORTED_MODULE_18__[\"Shop\"](this)\r\n\t\tthis.heroUI         = null\r\n\t\tthis.questUI        = null\r\n\t\tthis.loginScreen    = new _components_login_screen__WEBPACK_IMPORTED_MODULE_11__[\"LoginScreen\"](this)\r\n\t\tthis.map            = new _tools_map__WEBPACK_IMPORTED_MODULE_1__[\"Map\"](this)\r\n\t\tthis.camera         = new _tools_camera__WEBPACK_IMPORTED_MODULE_2__[\"Camera\"](this)\r\n\t\tthis.keyboard       = new _tools_keyboard__WEBPACK_IMPORTED_MODULE_3__[\"Keyboard\"]()\r\n\t\tthis.mouse          = new _tools_mouse__WEBPACK_IMPORTED_MODULE_4__[\"Mouse\"](this)\r\n\t\tthis.movableDom     = new _tools_movable_dom__WEBPACK_IMPORTED_MODULE_6__[\"MovableDom\"]()\r\n\t\tthis.assets         = {images: {}, sounds: {}}\r\n\t\tthis.heroes         = {}\r\n\t\tthis.dragons        = {}\r\n\t\tthis.fireballs      = {}\r\n\t\tthis.quests         = {}\r\n\t\tthis.registerScreen = new _components_register_screen__WEBPACK_IMPORTED_MODULE_12__[\"RegisterScreen\"](this) \r\n\t\tthis.heroCreation   = new _components_hero_creation__WEBPACK_IMPORTED_MODULE_14__[\"HeroCreation\"](this)\r\n\t\tthis.heroSelection  = new _components_hero_selection__WEBPACK_IMPORTED_MODULE_15__[\"HeroSelection\"](this)\r\n\t\tthis.self           = null\r\n\t\tthis.username       = ''\r\n\t\tthis.selectedHero   = ''\r\n\t\tthis.movableDom.enableMovement(document.getElementById('heroUI'))\r\n\t\tthis.movableDom.enableMovement(\r\n\t\t\tdocument.getElementById('chatContainer'), \r\n\t\t\tdocument.getElementById('chatSettings')\r\n\t\t)\r\n\t\tthis.renderer.load(_config_asset_sources__WEBPACK_IMPORTED_MODULE_10__[\"ASSET_SOURCES\"].images, 'client/assets/images/')\r\n\t\tthis.renderer.enableFullScreen()\r\n\t\tthis.loadSounds(_config_asset_sources__WEBPACK_IMPORTED_MODULE_10__[\"ASSET_SOURCES\"].sounds)\r\n\t\t.then(() => this.soundManager.init(this.assets.sounds))\r\n\t}\r\n\r\n\r\n\tstart() {\r\n\t\tthis.renderer.show()\r\n\t\tthis.mouse.init()\r\n\t\tthis.soundManager.play('Woodland Fantasy.mp3', true)\r\n\t\tthis.soundManager.setVolume('Woodland Fantasy.mp3', 0.2)\r\n\t\tsetInterval(() => this.update(), 16)\r\n\t\tthis.render()\r\n\t\tthis.heroUI = new _components_hero_ui__WEBPACK_IMPORTED_MODULE_16__[\"HeroUI\"](this)\r\n\t\tthis.heroUI.show()\r\n\t\tif(!this.self.props.won) {\r\n\t\t\tthis.questUI = new _components_quest_ui__WEBPACK_IMPORTED_MODULE_17__[\"QuestUI\"](this)\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.camera.update()\t\r\n\t\tthis.soundManager.update()\r\n\t\tthis.self.update()\r\n\t\tfor(let id in this.heroes) {\r\n\t\t\tthis.heroes[id].updateAbilitiesInstances()\r\n\t\t}\r\n\t\tfor(let id in this.fireballs) {\r\n\t\t\tthis.fireballs[id].update()\r\n\t\t}\r\n\t\tthis.heroUI.update()\r\n\t\tthis.socket.emit('selfState', this.self.getProps())\r\n\t}\r\n\t\r\n\trender() {\r\n\t\trequestAnimationFrame(() => this.render())\r\n\r\n\t\tthis.renderer.clear()\r\n\t\tthis.map.render()\t\r\n\t\tfor(let id in this.heroes) {\r\n\t\t\tthis.heroes[id].render()\r\n\t\t}\r\n\t\tthis.self.render()\r\n\t\tthis.map.renderLastLayer()\r\n\t\tfor(let id in this.fireballs) {\r\n\t\t\tthis.fireballs[id].render()\r\n\t\t}\r\n\t\tfor(let id in this.dragons) {\r\n\t\t\tthis.dragons[id].render()\r\n\t\t}\r\n\t\tthis.mouse.render()\r\n\t\tthis.renderer.render()\r\n\t}\r\n\r\n\r\n\tmakeSelf(activeStats) {\r\n\t\tthis.self = _entities_hero__WEBPACK_IMPORTED_MODULE_9__[\"Hero\"].makeHero(activeStats, this)\r\n\t\tconsole.log('This is self props...', this.self.props)\r\n\t\tthis.selectedHero = this.self.props.name\r\n\t\tthis.camera.follow(this.self)\r\n\t\tthis.socket.emit('getInitPackage', this.self.getProps(true))\r\n\t}\r\n\r\n\t//Heroes \r\n\r\n\taddHero(activeStats) {\r\n\t\tthis.heroes[activeStats.id] = _entities_hero__WEBPACK_IMPORTED_MODULE_9__[\"Hero\"].makeHero(activeStats, this)\r\n\t}\r\n\r\n\tupdateHero(props) {\r\n\t\tif(this.heroes[props.id]) {\r\n\t\t\tthis.heroes[props.id].setProps(props)\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteHero(id) {\r\n\t\tdelete this.heroes[id]\r\n\t}\r\n\r\n\r\n\t//Dragons\r\n\r\n\taddDragon(props) {\r\n\t\tthis.dragons[props.id] = new _entities_dragon__WEBPACK_IMPORTED_MODULE_7__[\"Dragon\"](this, props)\r\n\t}\r\n\r\n\tupdateDragon(props) {\r\n\t\tif(this.dragons[props.id]) {\r\n\t\t\tthis.dragons[props.id].setProps(props)\r\n\t\t}\r\n\t}\r\n\r\n\t//Firebals\r\n\r\n\taddFireball(props) {\r\n\t\tthis.fireballs[props.ID] = new _entities_fireball__WEBPACK_IMPORTED_MODULE_8__[\"Fireball\"](this, props) \r\n\t}\r\n\r\n\tremoveFireball(id) {\r\n\t\tdelete this.fireballs[id]\r\n\t}\r\n\r\n\t//Assets\r\n\t\r\n\tloadSounds(soundSources) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet loadedSounds = 0\r\n\t\t\tsoundSources.forEach(src => {\r\n\t\t\t\tthis.assets.sounds[src] = document.createElement('audio')\r\n\t\t\t\tthis.assets.sounds[src].src = 'client/assets/sounds/' + src\r\n\t\t\t\tthis.assets.sounds[src].oncanplay = () => {\r\n\t\t\t\t\tif(++loadedSounds >= soundSources.length) {\r\n\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t\r\n}\n\n//# sourceURL=webpack:///./src/game.js?");

/***/ }),

/***/ "./src/tools/camera.js":
/*!*****************************!*\
  !*** ./src/tools/camera.js ***!
  \*****************************/
/*! exports provided: Camera */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Camera\", function() { return Camera; });\nclass Camera {\r\n\r\n\tconstructor(game) { \r\n\t\tthis.game           = game\r\n\t\tthis.topLeft        = {X: 0, Y: 1200}\r\n\t\tthis.target         = null\r\n\t\tthis.manualMovement = true\r\n\t\tthis.velocity       = [0, 0]\r\n\t\tthis.speed          = 5\r\n\t}\r\n\r\n\tfollow(obj) {\r\n\t\tthis.target = obj\r\n\t\tthis.manualMovement = false\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tconst keys = this.game.keyboard.keys\r\n\t\tif(this.target) {\r\n\t\t\tthis.topLeft.X = this.target.props.X - this.game.renderer.canvas.width / 2\r\n\t\t\tthis.topLeft.Y = this.target.props.Y - this.game.renderer.canvas.height / 2\r\n\t\t}\r\n\t\tthis.assertValidPosition()\r\n\t}\r\n\r\n\tassertValidPosition() {\r\n\t\tif(this.topLeft.X < 0) this.topLeft.X = 0\r\n\t\telse if(this.topLeft.X + this.game.renderer.canvas.width > this.game.map.width) {\r\n\t\t\tthis.topLeft.X = this.game.map.width - this.game.renderer.canvas.width\r\n\t\t}\r\n\t\tif(this.topLeft.Y < 0) this.topLeft.Y = 0\r\n\t\telse if(this.topLeft.Y + this.game.renderer.canvas.height > this.game.map.height) {\r\n\t\t\tthis.topLeft.Y = this.game.map.height - this.game.renderer.canvas.height\r\n\t\t}\r\n\t}\r\n\r\n\tcontainsPoint(p) {\r\n\t\tconst width  = this.game.renderer.canvas.width,\r\n\t\t   \t  height = this.game.renderer.canvas.height,\r\n\t\t   \t  X      = this.topLeft.X,\r\n\t\t   \t  Y      = this.topLeft.Y\r\n\t\tif(p.X > X && p.X < X + width && p.Y > Y && p.Y < Y + width) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/camera.js?");

/***/ }),

/***/ "./src/tools/geometry.js":
/*!*******************************!*\
  !*** ./src/tools/geometry.js ***!
  \*******************************/
/*! exports provided: Point, Vector, VectorFromPoints, Circle, Rectangle, Shape, rectCollision, SATCollision */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return Point; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vector\", function() { return Vector; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VectorFromPoints\", function() { return VectorFromPoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Circle\", function() { return Circle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rectangle\", function() { return Rectangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shape\", function() { return Shape; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rectCollision\", function() { return rectCollision; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SATCollision\", function() { return SATCollision; });\nclass Point {\r\n\r\n\tconstructor(X, Y) {\r\n\t\tthis.X = X\r\n\t\tthis.Y = Y\r\n\t}\r\n\r\n\tadd(p) {\r\n\t\tthis.X += p.X\r\n\t\tthis.Y += p.Y\r\n\t\treturn this\r\n\t}\r\n\r\n\tsubtract(p) {\r\n\t\tthis.X -= p.X\r\n\t\tthis.Y -= p.Y\r\n\t\treturn this\r\n\t}\r\n\r\n\tmultiply(k) {\r\n\t\tthis.X *= k\r\n\t\tthis.Y *= k\r\n\t\treturn this\r\n\t}\r\n\r\n\tdivide(k) {\r\n\t\tif(k !== 0) {\r\n\t\t\tthis.X /= k\r\n\t\t\tthis.Y /= k\r\n\t\t} else {\r\n\t\t\tconsole.error('--Divide by 0--')\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\tdistance(p2) {\r\n\t\treturn Math.sqrt(Math.pow(p2.X - this.X, 2) + Math.pow(p2.Y - this.Y, 2))\r\n\t}\r\n\r\n\tmanhattanDistance(p2) {\r\n\t\treturn {X: Math.abs(this.X - p2.X), y: Math.abs(this.Y - p2.Y)}\r\n\t}\r\n\r\n\tstatic add(p1, p2) {\r\n\t\treturn new Point(p1.X + p2.X, p1.Y + p2.Y)\r\n\t}\r\n\r\n\tstatic subtract(p1, p2) {\r\n\t\treturn new Point(p1.X - p2.X, p1.Y - p2.Y)\r\n\t}\r\n\r\n\tstatic multiply(p, k) {\r\n\t\treturn new Point(p.X * k, p.Y * k)\r\n\t}\r\n\r\n\tstatic divide(p, k) {\r\n\t\tif(k !== 0) {\r\n\t\t\treturn new Point(p.X / k, p.Y / k)\r\n\t\t} else {\r\n\t\t\tconsole.error('--Divide by 0--')\r\n\t\t}\r\n\t}\r\n\r\n\tstatic distance(p1, p2) {\r\n\t\treturn Math.sqrt(Math.pow(p2.X - p1.X, 2) + Math.pow(p2.Y - p1.Y, 2))\r\n\t}\r\n\r\n\tstatic manhattanDistance(p1, p2) {\r\n\t\treturn {X: Math.abs(p1.X - p2.X), y: Math.abs(p1.Y - p2.Y)}\r\n\t}\r\n}\r\n\r\nclass Vector {\r\n\r\n\tconstructor(X, Y, _static = false) {\r\n\t\tthis._magnitude = null\r\n\t\tthis.static = _static\r\n\t\tthis._X = 1;\r\n\t\tthis._Y = 0;\r\n\t\tthis.angle = Vector.angle(X, Y)\r\n\t\tif(_static) {\r\n\t\t\tthis._X = X\r\n\t\t\tthis._Y = Y\r\n\t\t}\r\n\t}\r\n\r\n\tget magnitude() {\r\n\t\tif(!this._magnitude) {\r\n\t\t\tthis._magnitude = Vector.magnitude(this._X, this._Y)\r\n\t\t}\r\n\t\treturn this._magnitude\r\n\t}\r\n\r\n\traw() {\r\n\t\treturn { X: this._X, Y: this._Y }\r\n\t}\r\n\r\n\tstatic angle(X, Y) {\r\n\t\tlet angle = Math.atan(X / Y)\r\n\t\tconst PI_HALF = Math.PI / 2\r\n\t\tif(X >= 0 && Y >= 0) {\r\n\t\t\tangle = PI_HALF - angle\r\n\t\t} else if(X <= 0 && Y >= 0) {\r\n\t\t\tangle = PI_HALF + Math.abs(angle)\r\n\t\t} else if(X <= 0 && Y <= 0) {\r\n\t\t\tangle = 3 * PI_HALF - angle\r\n\t\t} else {\r\n\t\t\tangle = 3 * PI_HALF -  angle\r\n\t\t}\r\n\t\treturn angle\r\n\t}\r\n\r\n\tunit() {\r\n\t\tif(this.static) {\r\n\t\t\tthis._X /= this.magnitude\r\n\t\t\tthis._Y /= this.magnitude\r\n\t\t}\r\n\t\tthis._magnitude = 1 \r\n\t\treturn this\r\n\t}\r\n\r\n\tstatic magnitude(X, Y) {\r\n\t\treturn Math.sqrt(Math.pow(X, 2) + Math.pow(Y, 2))\r\n\t}\r\n\r\n\trotate(angle) {\r\n\t\tif(this.static) return\r\n\t\tthis.angle += angle\r\n\t\treturn this\r\n\t}\r\n\r\n\tget X() {\r\n\t\tif(this.static) return this._X\r\n\t\treturn (this._X * Math.cos(this.angle) - this._Y * Math.sin(this.angle)) * this._magnitude\r\n\t}\r\n\r\n\tget Y() {\r\n\t\tif(this.static) return this._Y\r\n\t\treturn (this._X * Math.sin(this.angle) + this._Y * Math.cos(this.angle)) * this._magnitude\r\n\t}\r\n\r\n\tset X(value) {\r\n\t\tthis._X = value\r\n\t}\r\n\r\n\tset Y(value) {\r\n\t\tthis._Y = value\r\n\t}\r\n\r\n\tstatic rotate(v, angle) {\r\n\t\tif(v.static) return\r\n\t\tv.angle += angle\r\n\t}\r\n\r\n\tadd(v) {\r\n\t\tthis._X += v.X\r\n\t\tthis._Y += v.Y\r\n\t\tthis.updateMagnitude()\r\n\t\tif(!this.static) {\r\n\t\t\tthis.angle = Vector.angle(this._X, this._Y)\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\tsubtract(v) {\r\n\t\tthis._X -= v.X\r\n\t\tthis._Y -= v.Y\t\r\n\t\tthis.updateMagnitude()\r\n\t\tif(!this.static) {\r\n\t\t\tthis.angle = Vector.angle(this._X, this._Y)\r\n\t\t}\r\n\t\treturn this\t\r\n\t}\r\n\r\n\tmultiply(k) {\r\n\t\tif(this.static) {\r\n\t\t\tthis._X *= k\r\n\t\t\tthis._Y *= k\r\n\t\t\tthis.updateMagnitude()\r\n\t\t} else {\r\n\t\t\tthis._magnitude *= k\t\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\t//Simple X, Y object to be used in expressions\r\n\tmultiplied(k) {\r\n\t\tif(this.static) {\r\n\t\t\treturn {\r\n\t\t\t\tX: this._X * k,\r\n\t\t\t\tY: this._Y * k\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst mult = k * this._magnitude\r\n\t\t\treturn {\r\n\t\t\t\tX: this.X * mult,\r\n\t\t\t\tY: this.Y * mult\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdivide(k) {\r\n\t\tif(k !== 0) {\r\n\t\t\tif(this.static) {\r\n\t\t\t\tthis._X /= k\r\n\t\t\t\tthis._Y /= k\r\n\t\t\t\tthis.updateMagnitude()\r\n\t\t\t} else {\r\n\t\t\t\tthis._magnitude /= k\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\treturn this\r\n\t}\r\n\r\n\tdot(v) {\r\n\t\treturn this.X * v.X + this.Y * v.Y\r\n\t}\r\n\r\n\tprojection(v) {\r\n\t\treturn this.dot(v) / this._magnitude\r\n\t}\r\n\r\n\tupdateMagnitude() {\r\n\t\tthis._magnitude = Vector.magnitude(this._X, this._Y)\r\n\t\treturn this\r\n\t}\r\n\r\n\tstatic add(v1, v2, _static = false) {\r\n\t\treturn new Vector(v1.X + v2.X, v1.Y + v2.Y, _static)\r\n\t}\r\n\r\n\tstatic subtract(v1, v2, _static = false) {\r\n\t\treturn new Vector(v1.X - v2.X, v1.Y - v2.Y, _static)\r\n\t}\r\n\r\n\tstatic multiply(v, k, _static = false) {\r\n\t\treturn new Vector(v.X * k, v.Y * k, _static)\r\n\t}\r\n\r\n\tstatic divide(v, k, _static = false) {\r\n\t\tif(k !== 0) {\r\n\t\t\treturn new Vector(v.X / k, v.Y / k, _static)\r\n\t\t}\r\n\t}\r\n\r\n\tstatic dot(v1, v2) {\r\n\t\treturn v1.X * v2.X + v1.Y * v2.Y\r\n\t}\r\n\r\n\tstatic projection(v1, v2) {\r\n\t\treturn Vector.dot(v1, v2) / v1._magnitude\r\n\t}\r\n\r\n\tstatic fromAngle(angle, _static = false) {\r\n\t\treturn new Vector(Math.cos(angle), Math.sin(angle), _static)\r\n\t}\r\n\r\n\tstatic random(_static = false) {\r\n\t\tlet angle = Math.random() * 2 * Math.PI\r\n\t\treturn new Vector(Math.cos(angle),Math.sin(angle), _static)\r\n\t}\r\n\r\n}\r\n\r\nclass VectorFromPoints extends Vector {\r\n\tconstructor(p1, p2, _static = false) {\r\n\t\tsuper(p2.X - p1.X, p2.Y - p1.Y, _static)\r\n\t}\r\n}\r\n\r\nclass Circle {\r\n\tconstructor(x, y, r, color = 'white') {\r\n\t\tthis._type = 'Circle';\r\n\t\tthis._center = new Point(x, y);\r\n\t\tthis._r = r;\r\n\t\tthis.color = color;\r\n\t}\r\n\tget r() {\r\n\t\treturn this._r;\r\n\t}\r\n\tget x() {\r\n\t\treturn this._center.x;\r\n\t}\r\n\tget y() {\r\n\t\treturn this._center.y;\r\n\t}\r\n\tget center() {\r\n\t\treturn this._center;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tgetBoundingRect() {\r\n\t\treturn new Rectangle(\r\n\t\t\tthis._center.x - this._r,\r\n\t\t\tthis._center.y - this._r,\r\n\t\t\t2 * this._r,\r\n\t\t\t2 * this._r\r\n\t\t);\r\n\t}\r\n\tscale(k) {\r\n\t\tthis._r *= k;\r\n\t}\r\n\ttranslate(v) {\r\n\t\tthis._center.add(v);\r\n\t}\r\n}\r\n\r\nclass Rectangle {\r\n\tconstructor(x, y, width, height, color = 'white') {\r\n\t\tthis._type = 'Rectangle';\r\n\t\tthis._topLeft = new Point(x, y);\r\n\t\tthis._width = width;\r\n\t\tthis._height = height;\r\n\t\tthis.color = color;\r\n\t}\r\n\tget x() {\r\n\t\treturn this._topLeft.x;\r\n\t}\r\n\tget y() {\r\n\t\treturn this._topLeft.y;\r\n\t}\r\n\tget width() {\r\n\t\treturn this._width;\r\n\t}\r\n\tget height() {\r\n\t\treturn this._height;\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tscale(k) {\r\n\t\tconst halfScale = k / 2;\r\n\t\tthis._topLeft.x -= halfScale;\r\n\t\tthis._topLeft.y -= halfScale;\r\n\t\tthis._width += k;\r\n\t\tthis._height += k;\r\n\t}\r\n\ttranslate(v) {\r\n\t\tthis._topLeft.add(v);\r\n\t}\r\n}\r\n\r\n\r\n//Rework this\r\nclass Shape {\r\n\tconstructor(points, color = 'white') {\r\n\t\tthis._points = points.slice();\r\n\t\tthis._type = 'Shape';\r\n\t\tthis.color = color;\r\n\t\tthis._axis = new Point(\r\n\t\t\tpoints.reduce((sum, curr) => sum + curr.x, 0) / points.length,\r\n\t\t\tpoints.reduce((sum, curr) => sum + curr.y, 0) / points.length\r\n\t\t);\r\n\t\tthis._vectors = [];\r\n\t\tpoints.forEach(p => this._vectors.push(new VectorFromPoints(\r\n\t\t\tthis._axis, p\r\n\t\t)));\r\n\t}\r\n\tget type() {\r\n\t\treturn this._type;\r\n\t}\r\n\tget axis() {\r\n\t\treturn this._axis;\r\n\t}\r\n\tget points() {\r\n\t\treturn this._points;\r\n\t}\r\n\tupdatePoints() {\r\n\t\tlet points = [];\r\n\t\tthis._vectors.forEach(v => {\r\n\t\t\tpoints.push(Point.add(this._axis, v));\r\n\t\t});\r\n\t\tthis._points = points;\r\n\t}\r\n\tgetBoundingRect() {\r\n\t\tlet points = this.points;\r\n\t\tlet xMin = points[0].x;\r\n\t\tlet xMax = points[0].x;\r\n\t\tlet yMin = points[0].y;\r\n\t\tlet yMax = points[0].y;\r\n\t\tfor(let i = 1; i < points.length; i++) {\r\n\t\t\tif(xMin > points[i].x) xMin = points[i].x;\r\n\t\t\tif(yMin > points[i].y) yMin = points[i].y;\r\n\t\t\tif(xMax < points[i].x) xMax = points[i].x;\r\n\t\t\tif(yMax < points[i].y) yMax = points[i].y;\r\n\t\t}\r\n\t\treturn new Rectangle(xMin, yMin, xMax - xMin, yMax - yMin);\r\n\t}\r\n\ttranslate(v) {\r\n\t\tthis._axis.add(v);\r\n\t\tthis.updatePoints();\r\n\t}\r\n\trotate(angle) {\r\n\t\tthis._vectors.forEach(v => v.rotate(angle));\r\n\t\tthis.updatePoints();\r\n\t}\r\n\tstatic makePolygon(n, color = 'white', scale = 1) {\r\n\t\tvar angle = 0;\r\n\t\tvar angleInc = Math.PI * 2 / n;\r\n\t\tvar points = [];\r\n\t\tfor(let i = 0; i < n; i++) {\r\n\t\t\tlet vx = Math.cos(angle);\r\n\t\t\tlet vy = Math.sin(angle);\r\n\t\t\tangle += angleInc;\r\n\t\t\tpoints.push(new Point(vx * 25 * scale, vy * 25 * scale));\r\n\t\t}\r\n\t\treturn new Shape(points, color);\r\n\t}\r\n\r\n}\r\n\r\n\r\n//Rework this...\r\nclass Quadtree {\r\n\tconstructor(boundingRect, pos = -1, parrent = null, level = 0) {\r\n\t\tthis.boundingRect = boundingRect;\r\n\t\t//top left, top right, bottom right, bottom left\r\n\t\t// this.nodes = [null, null, null, null];\r\n\t\tthis.nodes = [];\r\n\t\tthis.objects = [];\r\n\t\tthis.maxObjects = 1;\r\n\t\tthis.pos = pos;\r\n\t\tthis.parrent = parrent;\r\n\t\tthis.level = level;\r\n\t\tthis.maxLevel = 100;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.objects = [];\r\n\t\tthis.nodes = [null, null, null, null];\r\n\t}\r\n\r\n\tgetPartialRects(rect) {\r\n\t\tlet rect0 = null;\r\n\t\tlet rect1 = null;\r\n\t\tlet rect2 = null;\r\n\t\tlet rect3 = null;\r\n\t\tlet rx, ry, rw, rh;\r\n\t\tlet x = this.boundingRect.x;\r\n\t\tlet y = this.boundingRect.y;\r\n\t\tlet hW = this.boundingRect.width / 2 + this.boundingRect.x;\r\n\t\tlet hH = this.boundingRect.height / 2 + this.boundingRect.y;\r\n\t\t//Checking top side\r\n\t\tif(rect.y < hH) {\r\n\t\t\t// checking left side\r\n\t\t\tif(rect.x < hW) {\r\n\t\t\t\trx = rect.x;\r\n\t\t\t\try = rect.y;\r\n\t\t\t\tif(rect.x + rect.width < hW) {\r\n\t\t\t\t\trw = rect.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trw = hW - rect.x;\r\n\t\t\t\t}\r\n\t\t\t\tif(rect.y + rect.height < hH) {\r\n\t\t\t\t\trh = rect.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trh = hH - rect.y;\r\n\t\t\t\t}\r\n\t\t\t\trect0 = {\r\n\t\t\t\t\tx: rx, \r\n\t\t\t\t\ty: ry,\r\n\t\t\t\t\twidth: rw,\r\n\t\t\t\t\theight: rh\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t//Checking right side\r\n\t\t\tif(rect.x + rect.width > hW) {\r\n\t\t\t\try = rect.y;\r\n\t\t\t\tif(rect.x > hW) {\r\n\t\t\t\t\trx = rect.x;\r\n\t\t\t\t\trw = rect.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trx = hW;\r\n\t\t\t\t\trw = rect.x + rect.width - hW;\r\n\t\t\t\t}\r\n\t\t\t\tif(rect.y + rect.height < hH) {\r\n\t\t\t\t\trh = rect.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trh = hH - rect.y;\r\n\t\t\t\t}\r\n\t\t\t\trect1 = {\r\n\t\t\t\t\tx: rx, \r\n\t\t\t\t\ty: ry,\r\n\t\t\t\t\twidth: rw,\r\n\t\t\t\t\theight: rh\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Checking bottom side\r\n\t\tif(rect.y + rect.height > hH) {\r\n\t\t\t//Checking right side\r\n\t\t\tif(rect.x + rect.width > hW) {\r\n\t\t\t\tif(rect.x > hW) {\r\n\t\t\t\t\trx = rect.x;\r\n\t\t\t\t\trw = rect.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trx = hW;\r\n\t\t\t\t\trw = rect.x + rect.width - hW;\r\n\t\t\t\t}\r\n\t\t\t\tif(rect.y > hH) {\r\n\t\t\t\t\try = rect.y;\r\n\t\t\t\t\trh = rect.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\try = hH;\r\n\t\t\t\t\trh = rect.y + rect.height - hH;\r\n\t\t\t\t}\r\n\t\t\t\trect2 = {\r\n\t\t\t\t\tx: rx, \r\n\t\t\t\t\ty: ry,\r\n\t\t\t\t\twidth: rw,\r\n\t\t\t\t\theight: rh\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t//Checking left side\r\n\t\t\tif(rect.x < hW) {\r\n\t\t\t\trx = rect.x;\r\n\t\t\t\tif(rect.x + rect.width < hW) {\r\n\t\t\t\t\trw = rect.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\trw = hW - rect.x;\r\n\t\t\t\t}\r\n\t\t\t\tif(rect.y > hH) {\r\n\t\t\t\t\try = rect.y;\r\n\t\t\t\t\trh = rect.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\try = hH;\r\n\t\t\t\t\trh = rect.y + rect.height - hH;\r\n\t\t\t\t}\r\n\t\t\t\trect3 = {\r\n\t\t\t\t\tx: rx, \r\n\t\t\t\t\ty: ry,\r\n\t\t\t\t\twidth: rw,\r\n\t\t\t\t\theight: rh\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn [rect0, rect1, rect2, rect3];\r\n\t}\r\n\r\n\tretrieveObjects(rect) {\r\n\t\tlet index = this.getIndex(rect);\r\n\t\tif(index != -1) {\r\n\t\t\tif(this.nodes.length > 0) {\r\n\t\t\t\treturn this.nodes[index].retrieveObjects(rect);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.objects;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(this.nodes.length != 0) {\r\n\t\t\t\tlet pRects = this.getPartialRects(rect);\r\n\t\t\t\tlet result = [];\r\n\t\t\t\tif(pRects[0]) {\r\n\t\t\t\t\tresult = result.concat(this.nodes[0].retrieveObjects(pRects[0]));\r\n\t\t\t\t}\r\n\t\t\t\tif(pRects[1]) {\r\n\t\t\t\t\tresult = result.concat(this.nodes[1].retrieveObjects(pRects[1]));\r\n\t\t\t\t}\r\n\t\t\t\tif(pRects[2]) {\r\n\t\t\t\t\tresult = result.concat(this.nodes[2].retrieveObjects(pRects[2]));\r\n\t\t\t\t}\r\n\t\t\t\tif(pRects[3]) {\r\n\t\t\t\t\tresult = result.concat(this.nodes[3].retrieveObjects(pRects[3]));\r\n\t\t\t\t}\r\n\t\t\t\treturn this.objects.concat(result);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.objects;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetIndex(oRect) {\r\n\t\tlet x = this.boundingRect.x;\r\n\t\tlet y = this.boundingRect.y;\r\n\t\tlet width = this.boundingRect.width / 2;\r\n\t\tlet height = this.boundingRect.height / 2;\r\n\t\tlet xPlusWidth = x + width;\r\n\t\tlet yPlusHeight = y + height;\r\n\t\tlet objX = oRect.x;\r\n\t\tlet objY = oRect.y;\r\n\t\tlet objWidth = oRect.width;\r\n\t\tlet objHeight = oRect.height;\r\n\t\tlet objXPlusObjWidth = objX + objWidth;\r\n\t\tlet objYPlusObjHeight = objY + objHeight;\r\n\t\tlet yPlusHeightTimes2 = yPlusHeight * 2;\r\n\t\t//Checking which node object belongs to\r\n\t\t//Checking left side\r\n\t\tif(objX >= x && objXPlusObjWidth <= xPlusWidth) {\r\n\t\t\t//checking top side\r\n\t\t\tif(objY >= y && objYPlusObjHeight <= yPlusHeight) {\r\n\t\t\t\treturn 0;\r\n\t\t\t\t//checking bottom side\r\n\t\t\t} else if(objY >= yPlusHeight && objYPlusObjHeight <= yPlusHeightTimes2) {\r\n\t\t\t\treturn 3;\r\n\t\t\t} else {\r\n\t\t\t\t//doesn't fit anywhere on left side, stays in parrent\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\t//checking right side\r\n\t\t} else if(objX >= xPlusWidth && objXPlusObjWidth <= xPlusWidth * 2) {\r\n\t\t\t//checking top side\r\n\t\t\tif(objY >= y && objYPlusObjHeight <= yPlusHeight) {\r\n\t\t\t\treturn 1;\r\n\t\t\t\t//checking bottom side\r\n\t\t\t} else if(objY >= yPlusHeight && objYPlusObjHeight <= yPlusHeightTimes2) {\r\n\t\t\t\treturn 2;\r\n\t\t\t} else {\r\n\t\t\t\t//doesn't fit anywhere on right side, stays in parrent\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\tinsert(obj) {\r\n\t\tif(this.level > this.maxLevel) {\r\n\t\t\tthis.objects.push(obj);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet index;\r\n\t\tif(this.nodes.length == 0) {\r\n\t\t\tif(this.objects.length < this.maxObjects) {\r\n\t\t\t\tthis.objects.push(obj);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.split();\r\n\t\t\t\tfor(let i = 0; i < this.objects.length; i++) {\r\n\t\t\t\t\tindex = this.getIndex(this.objects[i].boundingRect());\r\n\t\t\t\t\tif(index != -1) {\r\n\t\t\t\t\t\tthis.nodes[index].insert(this.objects[i]);\r\n\t\t\t\t\t\tthis.objects.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tindex = this.getIndex(obj.boundingRect());\r\n\t\t\t\tif(index == -1) {\r\n\t\t\t\t\tthis.objects.push(obj);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.nodes[index].insert(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tindex = this.getIndex(obj.boundingRect());\r\n\t\t\tif(index == -1) {\r\n\t\t\t\tthis.objects.push(obj);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.nodes[index].insert(obj);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tif(this.nodes.length == 0) {\r\n\t\t\tlet p = {\r\n\t\t\t\tx: this.boundingRect.x,\r\n\t\t\t\ty: this.boundingRect.y\r\n\t\t\t};\r\n\t\t\tif(CAMERA.isInCamera(p)) {\r\n\t\t\t\tp = CAMERA.worldToCanvas(p);\r\n\t\t\t\tlet width = this.boundingRect.width;\r\n\t\t\t\tlet height = this.boundingRect.height;\r\n\t\t\t\tstrokeRectangle(ctx, p, width, height, 'white', 2);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tthis.nodes.forEach(n => n.draw());\r\n\t\t}\r\n\t}\r\n\r\n\t//Only for nodes[null, null, null, null]\r\n\tmakeNode(pos) {\r\n\t\tlet x = this.boundingRect.x;\r\n\t\tlet y = this.boundingRect.y;\r\n\t\tlet width = this.boundingRect.width / 2;\r\n\t\tlet height = this.boundingRect.height / 2;\r\n\t\tlet boundingRect;\r\n\r\n\t\tswitch(pos) {\r\n\t\t\tcase 0:\r\n\t\t\t\tboundingRect = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t};\r\n\t\t\t\tthis.nodes[0] = new Quadtree(boundingRect, 0, this, this.level + 1);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\tboundingRect = {\r\n\t\t\t\t\tx: x + width,\r\n\t\t\t\t\ty: y,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t};\r\n\t\t\t\tthis.nodes[1] = new Quadtree(boundingRect, 1, this, this.level + 1);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2: \r\n\t\t\t\tboundingRect = {\r\n\t\t\t\t\tx: x + width,\r\n\t\t\t\t\ty: y + height,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t};\r\n\t\t\t\tthis.nodes[2] = new Quadtree(boundingRect, 2, this, this.level + 1);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tboundingRect = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\ty: y + height,\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height\r\n\t\t\t\t};\r\n\t\t\t\tthis.nodes[3] = new Quadtree(boundingRect, 3, this, this.level + 1);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsplit() {\r\n\t\tlet x = this.boundingRect.x;\r\n\t\tlet y = this.boundingRect.y;\r\n\t\tlet width = this.boundingRect.width / 2;\r\n\t\tlet height = this.boundingRect.height / 2;\r\n\t\tlet xPlusWidth = x + width;\r\n\t\tlet yPlusHeight = y + height;\r\n\t\tlet childLevel = this.level + 1;\r\n\t\t//top left node\r\n\t\tlet boundingRect = {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t\t// this.nodes[0] = new Quadtree(boundingRect, 0, this, childLevel);\r\n\t\tthis.nodes.push(new Quadtree(boundingRect, 0, this, childLevel));\r\n\t\t//top right node\r\n\t\tboundingRect = {\r\n\t\t\tx: xPlusWidth,\r\n\t\t\ty: y,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t\t// this.nodes[1] = new Quadtree(boundingRect, 1, this, childLevel);\r\n\t\tthis.nodes.push(new Quadtree(boundingRect, 1, this, childLevel));\r\n\t\t//bottom right node\r\n\t\tboundingRect = {\r\n\t\t\tx: xPlusWidth,\r\n\t\t\ty: yPlusHeight,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t\t// this.nodes[2] = new Quadtree(boundingRect, 2, this, childLevel);\r\n\t\tthis.nodes.push(new Quadtree(boundingRect, 2, this, childLevel));\r\n\t\t//bottom left node\r\n\t\tboundingRect = {\r\n\t\t\tx: x,\r\n\t\t\ty: yPlusHeight,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t\t// this.nodes[3] = new Quadtree(boundingRect, 3, this, childLevel);\r\n\t\tthis.nodes.push(new Quadtree(boundingRect, 3, this, childLevel));\r\n\t}\r\n}\r\n\r\nfunction rectCollision(rect1, rect2) {\r\n\tif(rect1.X + rect1.width > rect2.X && rect1.X < rect2.X + rect2.width &&\r\n\t\trect1.Y + rect1.height > rect2.Y && rect1.Y < rect2.Y + rect2.height) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction SATCollision(shape1,shape2) {\r\n\tvar projection1,projection2;\r\n\tvar shapes = [];\r\n\tvar edges = [];\r\n\tvar data = [];\r\n\tvar MTV;\r\n\t//Starting with edges from a shape with less edges to bail out faster on no collision\r\n\tif(shape1.points.length > shape2.points.length) {\r\n\t\tshapes.push(shape2);\r\n\t\tshapes.push(shape1);\r\n\t} else {\r\n\t\tshapes.push(shape1);\r\n\t\tshapes.push(shape2);\r\n\t}\r\n\t//Calculating and putting edges of both shapes in edges array, starting with shape having less edges\r\n\tfor(let n = 0; n < 2; n++) {\r\n\t\tlet start = shapes[n].points[shapes[n].points.length-1];\r\n\t\tlet end = shapes[n].points[0];\r\n\t\tlet v = new VectorFromPoints(start,end);\r\n\t\tlet edge = {start: start, end: end, v: v};\r\n\t\tedges.push(edge);\r\n\t\tfor(let i=0;i<shapes[n].points.length-1;i++) {\r\n\t\t\tstart = shapes[n].points[i];\r\n\t\t\tend = shapes[n].points[i+1];\r\n\t\t\tv = new VectorFromPoints(start,end);\r\n\t\t\tedge = {start: start, end: end, v: v};\r\n\t\t\tedges.push(edge);\r\n\t\t}\r\n\t}\r\n\t//Iterating through each edge and calculating projection of all points of shape1 and shape2 onto\r\n\t//current edge, storing the projections in projection1 and projection2 arrays respectively\r\n\tfor(let k = 0; k < edges.length; k++) {\r\n\t\tprojection1 = [];\r\n\t\tfor(let i = 0; i < shapes[0].points.length; i++) {\r\n\t\t\tprojectedV = new VectorFromPoints(edges[k].start,shapes[0].points[i]);\r\n\t\t\tprojection1.push(Vector.projection(edges[k].v, projectedV));\r\n\t\t}\r\n\t\tprojection2 = [];\r\n\t\tfor(let i = 0; i < shapes[1].points.length; i++) {\r\n\t\t\tprojectedV = new VectorFromPoints(edges[k].start,shapes[1].points[i]);\r\n\t\t\tprojection2.push(Vector.projection(edges[k].v, projectedV));\r\n\t\t}\r\n\t\tprojection1.sort((a,b) => a - b);\r\n\t\tprojection2.sort((a,b) => a - b);\r\n\t\tlet d1 = Math.abs(projection2[projection2.length - 1] - projection1[0]);\r\n\t\tlet d2 = Math.abs(projection1[projection1.length - 1] - projection2[0]);\r\n\t\tdata.push({v: edges[k].v, d: d1});\r\n\t\tdata.push({v: edges[k].v, d: d2});\r\n\t\t//Comparing projections, whether they overlap, if there is a gap at any point, there is no collision\r\n\t\tif(!(projection2[projection2.length-1] > projection1[0] &&\r\n\t\t     projection1[projection1.length-1] > projection2[0])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t//No gaps were found, meaning collision happened\r\n\tdata.sort((a, b) => a.d - b.d);\r\n\tdata[0].v.unit();\r\n\tdata[0].v.x = Math.abs(data[0].v.x);\r\n\tdata[0].v.y = Math.abs(data[0].v.y);\r\n\tMTV = {length: data[0].d, v: data[0].v, shape1Left: false, shape1Up: false};\r\n\tif(shape1.axis.x < shape2.axis.x) {\r\n\t\tMTV.shape1Left = true;\r\n\t}\r\n\tif(shape1.axis.y < shape2.axis.y) {\r\n\t\tMTV.shape1Up = true;\r\n\t}\r\n\treturn MTV;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/tools/geometry.js?");

/***/ }),

/***/ "./src/tools/keyboard.js":
/*!*******************************!*\
  !*** ./src/tools/keyboard.js ***!
  \*******************************/
/*! exports provided: Keyboard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Keyboard\", function() { return Keyboard; });\nclass Keyboard {\r\n\tconstructor() { \r\n\t\tthis.keys = {};\r\n\t\twindow.addEventListener('keydown', (ev) => this.onKeyDown(ev));\r\n\t\twindow.addEventListener('keyup', (ev) => this.onKeyUp(ev));\r\n\t}\r\n\tonKeyDown(ev) {\r\n\t\tthis.keys[ev.keyCode] = true;\r\n\t\tthis.keys[ev.key] = true;\r\n\t}\r\n\tonKeyUp(ev) {\r\n\t\tthis.keys[ev.keyCode] = false;\r\n\t\tthis.keys[ev.key] = false;\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/keyboard.js?");

/***/ }),

/***/ "./src/tools/map.js":
/*!**************************!*\
  !*** ./src/tools/map.js ***!
  \**************************/
/*! exports provided: Map */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Map\", function() { return Map; });\nclass Map {\r\n\r\n\tconstructor(game) { \r\n\t\tthis.game          = game\r\n\t\tthis.tileSize      = null\r\n\t\tthis.width         = null\r\n\t\tthis.height        = null\r\n\t\tthis.numOfRows     = null\r\n\t\tthis.numOfCols     = null\r\n\t\tthis.sprites       = null\r\n\t\tthis.spritesMargin = null\r\n\t\tthis.tiles         = null\r\n\t\tthis.toBeRendered  = []\r\n\t}\r\n\r\n\tinit(mapData) {\r\n\t\tif(!mapData) {\r\n\t\t\tconsole.log('Did not receive map data')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.tileSize = mapData.tileSize;\r\n\t\tthis.width = mapData.width;\r\n\t\tthis.height = mapData.height;\r\n\t\tthis.numOfRows = mapData.numOfRows;\r\n\t\tthis.numOfCols = mapData.numOfCols;\r\n\t\tthis.sprites = mapData.sprites;\r\n\t\tthis.spritesMargin = mapData.spritesMargin;\r\n\t\tthis.tiles = mapData.tiles;\r\n\t}\r\n\r\n\tgetTilesInTheWay(rect, v) {\r\n\t\tlet tiles = {left: [], right: [], bottom: [], top: []};\r\n\t\tconst A = {X: rect.X + v[0], Y: rect.Y + v[1] + rect.height};\r\n\t\tconst B = {X: rect.X + v[0] + rect.width, Y: rect.Y + v[1] + rect.height};\r\n\t\tconst C = {X: rect.X + v[0] + rect.width, Y: rect.Y + v[1]};\r\n\t\tconst D = {X: rect.X + v[0], Y: rect.Y + v[1]};\r\n\t\tlet tileIndex;\r\n\t\tif(v[0] > 0) {\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(C.X, C.Y);\r\n\t\t\ttiles.right.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\tC.Y += this.tileSize;\r\n\t\t\twhile(C.Y < B.Y) {\r\n\t\t\t\ttileIndex = this.getTileIndexFromWorldPosition(C.X, C.Y);\r\n\t\t\t\ttiles.right.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\t\tC.Y += this.tileSize;\r\n\t\t\t}\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(B.X, B.Y);\r\n\t\t\ttiles.right.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t} else if(v[0] < 0) {\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(D.X, D.Y);\r\n\t\t\ttiles.left.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\tD.Y += this.tileSize;\r\n\t\t\twhile(D.Y < A.Y) {\r\n\t\t\t\ttileIndex = this.getTileIndexFromWorldPosition(D.X, D.Y);\r\n\t\t\t\ttiles.left.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\t\tD.Y += this.tileSize;\r\n\t\t\t}\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(A.X, A.Y);\r\n\t\t\ttiles.left.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t}\r\n\t\tif(v[1] > 0) {\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(A.X, A.Y);\r\n\t\t\ttiles.bottom.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\tA.X += this.tileSize;\r\n\t\t\twhile(A.X < B.X) {\r\n\t\t\t\ttileIndex = this.getTileIndexFromWorldPosition(A.X, A.Y);\r\n\t\t\t\ttiles.bottom.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\t\tA.X += this.tileSize;\r\n\t\t\t}\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(B.X, B.Y);\r\n\t\t\ttiles.bottom.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t} else if(v[1] < 0) {\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(D.X, D.Y);\r\n\t\t\ttiles.top.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\tD.X += this.tileSize;\r\n\t\t\twhile(D.X < C.X) {\r\n\t\t\t\ttileIndex = this.getTileIndexFromWorldPosition(D.X, D.Y);\r\n\t\t\t\ttiles.top.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t\t\tD.X += this.tileSize;\r\n\t\t\t}\r\n\t\t\ttileIndex = this.getTileIndexFromWorldPosition(C.X, C.Y);\r\n\t\t\ttiles.top.push(this.getTileId(tileIndex.i, tileIndex.j));\r\n\t\t}\r\n\t\treturn tiles;\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.toBeRendered = []\t\t\r\n\t\tconst data = this.getVisibleMapPart();\r\n\t\tfor(let i = data.i; i < data.iMax; i++) {\r\n\t\t\tfor(let j = data.j; j < data.jMax; j++) {\r\n\t\t\t\tif(this.tiles[i][j][0][0] !== null) {\r\n\t\t\t\t\tif(this.getTileId(i, j) == 3) {\r\n\t\t\t\t\t\tthis.renderTile(i, j, 0, 1)\r\n\t\t\t\t\t\tthis.toBeRendered.push([i, j])\r\n\t\t\t\t\t\tcontinue\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderTile(i, j)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\r\n\trenderLastLayer() {\r\n\t\tthis.toBeRendered.forEach(index => {\r\n\t\t\tthis.renderTile(index[0], index[1], 1)\r\n\t\t})\r\n\t}\r\n\r\n\trenderTile(i, j, start = false, end = false) {\r\n\t\tlet n = 0\r\n\t\tif(start) n = start\r\n\t\tlet max = this.tiles[i][j].length\r\n\t\tif(end) max = end\t\t\r\n\t\tconst layers = this.tiles[i][j]\r\n\t\tfor(; n < max; n++) {\r\n\t\t\tconst layer       = layers[n],\r\n\t\t\t\t  spriteIndex = layer[0],\r\n\t\t\t\t  sX          = layer[1],\r\n\t\t\t\t  sY          = layer[2]\r\n\t\t\tthis.game.renderer.image(\r\n\t\t\t\tthis.sprites[spriteIndex], \r\n\t\t\t\tsX, sY, this.tileSize, this.tileSize,\r\n\t\t\t\tparseInt(j * this.tileSize - this.game.camera.topLeft.X), \r\n\t\t\t\tparseInt(i * this.tileSize - this.game.camera.topLeft.Y), \r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tgetVisibleMapPart() {\r\n\t\tconst topLeft = this.game.camera.topLeft;\r\n\t\tconst tileIndex = this.getTileIndexFromWorldPosition(topLeft.X, topLeft.Y);\r\n\t\tlet i = tileIndex.i, j = tileIndex.j;\r\n\t\ti-=2; j-=2;\r\n\t\tif(i < 0) i = 0;\r\n\t\tif(j < 0) j = 0;\r\n\t\tlet iMax = i + Math.floor(this.game.renderer.canvas.height / this.tileSize) + 4;\r\n\t\tlet jMax = j + Math.floor(this.game.renderer.canvas.width  / this.tileSize) + 4;\r\n\t\tif(iMax > this.tiles.length) iMax = this.tiles.length;\r\n\t\tif(jMax > this.tiles[0].length) jMax = this.tiles[0].length;\r\n\t\treturn {i, j, iMax, jMax};\r\n\t}\r\n\r\n\tgetTileIndexFromWorldPosition(X, Y) {\r\n\t\treturn {\r\n\t\t\ti: Math.floor(Y / this.tileSize),\r\n\t\t\tj: Math.floor(X / this.tileSize)\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetTileId(i, j) {\r\n\t\tif(i < 0 || j < 0 || i >= this.tiles.length || j >= this.tiles[0].length)\r\n\t\t\treturn 2\r\n\t\t\r\n\t\treturn this.tiles[i][j][0][3];\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/map.js?");

/***/ }),

/***/ "./src/tools/mouse.js":
/*!****************************!*\
  !*** ./src/tools/mouse.js ***!
  \****************************/
/*! exports provided: Mouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return Mouse; });\nclass Mouse {\r\n\t\r\n\tconstructor(game) { \r\n\t\tthis.game = game\r\n\t\tthis.X = 0, this.Y = 0\r\n\t\tthis.RMB = false\r\n\t\tthis.LMB = false\r\n\t\tthis.hidden = false\r\n\t\tthis.buttons = { 'RMB': false, 'LMB': false }\r\n\t\tthis.cRect = this.game.renderer.canvas.getBoundingClientRect()\r\n\t\twindow.addEventListener('mousemove', ev => {\r\n\t\t\tthis.X = ev.clientX - this.cRect.x, this.Y = ev.clientY - this.cRect.y\r\n\t\t})\r\n\t\twindow.addEventListener('mousedown', ev => {\r\n\t\t\tif(ev.button == 0) {\r\n\t\t\t\tthis.LMB            = true\r\n\t\t\t\tthis.buttons['LMB'] = true\r\n\t\t\t}\r\n\t\t\telse if(ev.button == 2) {\r\n\t\t\t\tthis.RMB            = true\r\n\t\t\t\tthis.buttons['RMB'] = true\r\n\t\t\t}\r\n\t\t})\r\n\t\twindow.addEventListener('mouseup', ev => {\r\n\t\t\tif(ev.button == 0) {\r\n\t\t\t\tthis.LMB            = false\r\n\t\t\t\tthis.buttons['LMB'] = false\r\n\t\t\t}\r\n\t\t\telse if(ev.button == 2) {\r\n\t\t\t\tthis.RMB            = false\r\n\t\t\t\tthis.buttons['RMB'] = false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.cRect = this.game.renderer.canvas.getBoundingClientRect()\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.hidden = true\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.hidden = false\r\n\t}\r\n\r\n\tget worldX() {\r\n\t\treturn this.game.camera.topLeft.X + this.X \r\n\t}\r\n\r\n\tget worldY() {\r\n\t\treturn this.game.camera.topLeft.Y + this.Y\r\n\t}\r\n\r\n\ton(event, func) {\r\n\t\tswitch(event) {\r\n\t\t\tcase 'LMBUp':\r\n\t\t\t\tdocument.addEventListener('mouseup', ev => {\r\n\t\t\t\t\tif(ev.button == 0) func() \r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'LMBDown':\r\n\t\t\t\tdocument.addEventListener('mousedown', ev => {\r\n\t\t\t\t\tif(ev.button == 0) func() \r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'RMBUp':\r\n\t\t\t\tdocument.addEventListener('mouseup', ev => {\r\n\t\t\t\t\tif(ev.button == 2) func() \r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'RMBDown':\r\n\t\t\t\tdocument.addEventListener('mousedown', ev => {\r\n\t\t\t\t\tif(ev.button == 2) func() \r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.hidden) return\r\n\t\tthis.game.renderer.image(\r\n\t\t\t'small-sword.png',\r\n\t\t\t0, 0, 16, 16,\r\n\t\t\tparseInt(this.X), parseInt(this.Y),\r\n\t\t\t20, 20\r\n\t\t)\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/mouse.js?");

/***/ }),

/***/ "./src/tools/movable-dom.js":
/*!**********************************!*\
  !*** ./src/tools/movable-dom.js ***!
  \**********************************/
/*! exports provided: MovableDom */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MovableDom\", function() { return MovableDom; });\nclass MovableDom {\r\n\r\n\tconstructor() {\r\n\t\tthis.elements = {}\r\n\t}\r\n\r\n\t//Independant part, change moveElement method if needed\r\n\tenableMovement(elToMove, elToHold = false) {\r\n\t\tif(!elToHold) elToHold = elToMove\r\n\t\tconst ID = Math.random() + ''\r\n\t\tthis.elements[ID] = {\r\n\t\t\theld: false, \r\n\t\t\tmouseXStart: null, mouseYStart: null\r\n\t\t}\r\n\t\tconst element = this.elements[ID]\r\n\t\telToHold.addEventListener('mousedown', ev => {\r\n\t\t\tif(ev.button != 0) return\r\n\t\t\telement.held = true\r\n\t\t\tthis.saveState(elToMove, ID, ev)\r\n\t\t})\r\n\t\twindow.addEventListener('mouseup', ev => {\r\n\t\t\tif(ev.button != 0) return\r\n\t\t\telement.held = false\r\n\t\t})\r\n\t\tdocument.addEventListener('mousemove', ev => {\r\n\t\t\tif(element.held) {\r\n\t\t\t\tconst deltaX = parseInt(ev.clientX - element.mouseOriginX)\r\n\t\t\t\tconst deltaY = parseInt(ev.clientY - element.mouseOriginY)\r\n\t\t\t\tthis.moveElement(elToMove, ID, deltaX, deltaY)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsaveState(element, ID, ev) {\r\n\t\tconst cs = window.getComputedStyle(element)\r\n\t\tconst Y = parseInt(cs.getPropertyValue('bottom'))\r\n\t\tconst X = parseInt(cs.getPropertyValue('left'))\r\n\t\tthis.elements[ID].originX = X\r\n\t\tthis.elements[ID].originY = Y\r\n\t\tthis.elements[ID].mouseOriginX = ev.clientX\r\n\t\tthis.elements[ID].mouseOriginY = ev.clientY\r\n\t}\r\n\r\n\tmoveElement(element, ID, deltaX, deltaY) {\r\n\t\tconst X = this.elements[ID].originX + deltaX\r\n\t\tconst Y = this.elements[ID].originY - deltaY\r\n\t\telement.style.bottom = Y + 'px'\r\n\t\telement.style.left = X + 'px'\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/movable-dom.js?");

/***/ }),

/***/ "./src/tools/renderer.js":
/*!*******************************!*\
  !*** ./src/tools/renderer.js ***!
  \*******************************/
/*! exports provided: Renderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Renderer\", function() { return Renderer; });\nconst colors = {\r\n    red     : 0xFF0000, \r\n    green   : 0x00FF00, \r\n    blue    : 0x0000FF,\r\n    white   : 0xFFFFFF,\r\n    black   : 0x000000,\r\n    yellow  : 0xFFFF00,\r\n    violet  : 0xEE82EE,\r\n    snow    : 0xFFFAFA,\r\n    skyblue : 0x87CEEB,\r\n    purple  : 0x800080,\r\n    pink    : 0xFFC0CB,\r\n    orange  : 0xFFA500,\r\n    gray    : 0x808080,\r\n    indigo  : 0x4B0082,\r\n    gold    : 0xFFD700,\r\n    cyan    : 0x00008B,\r\n    brown   : 0xA52A2A,\r\n    aqua    : 0x00FFFF\r\n}\r\n\r\nclass Renderer {\r\n\r\n    constructor(PIXI, settings = {}) {\r\n        this.PIXI      = PIXI\r\n        this.settings  = settings\r\n        this.colors    = colors\r\n        this.app       = new PIXI.Application(settings)\r\n        this.canvas    = this.app.view\r\n        this.loader    = PIXI.loader\r\n        this.resources = PIXI.loader.resources\r\n        this.Sprite    = PIXI.Sprite\r\n        this.stage     = this.app.stage\r\n        this.renderer  = this.app.renderer\r\n        this.Graphics  = PIXI.Graphics\r\n        this.Text      = PIXI.Text\r\n        this.Rectangle = PIXI.Rectangle\r\n        this.Texture   = PIXI.Texture\r\n        this.container = document.getElementById('gameContainer')\r\n        this.stroke    = true\r\n        this.rotation  = false\r\n        this.prefix    = ''\r\n        this.init()\r\n    }\r\n\r\n    init() {\r\n        this.canvas.oncontextmenu    = ev => ev.preventDefault()\r\n        this.container.style.width   = this.canvas.width  + 'px'\r\n\t\tthis.container.style.height  = this.canvas.height + 'px'\r\n        this.app.renderer.autoResize = true\r\n        this.app.view.style.position = 'absolute'\r\n        this.app.view.style.display  = 'block'\r\n        this.container.appendChild(this.canvas)\r\n    }\r\n\r\n    load(_sources, prefix = '') {\r\n        this.prefix = prefix\r\n        return new Promise((resolve, reject) => {\r\n            let sources = []\r\n            _sources.forEach(src => sources.push(prefix + src)) \r\n            this.loader.add(sources).load(resolve())\r\n       })\r\n    }\r\n\r\n    show() {\r\n        this.container.style.display = 'block'\r\n    }\r\n\r\n    hide() {\r\n        this.container.style.display = 'none'\r\n    }\r\n\r\n    defaultToStroke() {\r\n        this.stroke = true\r\n    }\r\n\r\n    defaultToFill() {\r\n        this.stroke = false\r\n    }\r\n\r\n    rotate(angle) {\r\n    \tthis.rotation = angle\r\n    }\r\n\r\n    backgroundColor(color) {\r\n        this.app.renderer.backgroundColor = color\r\n    }\r\n\r\n    enableFullScreen() {\r\n        this.resize(window.innerWidth, window.innerHeight)\r\n        window.addEventListener('resize', () => {\r\n            this.resize(window.innerWidth, window.innerHeight)\r\n        })\r\n    }\r\n\r\n    resize(X, Y) {\r\n        this.renderer.resize(X, Y)\r\n        this.container.style.width   = this.canvas.width  + 'px'\r\n\t\tthis.container.style.height  = this.canvas.height + 'px'\r\n    }\r\n\r\n    add(obj) {\r\n        this.stage.addChild(obj)\r\n    }\r\n\r\n    clear() {\r\n        this.stage.removeChildren()\r\n    }\r\n\r\n    render() {\r\n        this.renderer.render(this.stage)\r\n    }\r\n\r\n    strokeRect(X, Y, width, height, color, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const rectangle = new this.Graphics()\r\n        rectangle.lineStyle(lineWidth, color, 1)\r\n        rectangle.drawRect(X, Y, width, height)\r\n        this.add(rectangle)\r\n    }\r\n\r\n    fillRect(X, Y, width, height, color) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const rectangle = new this.Graphics()\r\n        rectangle.beginFill(color)\r\n        rectangle.drawRect(X, Y, width, height)\r\n        rectangle.endFill()\r\n        this.add(rectangle)\r\n    }\r\n\r\n    rect(...data) {\r\n        if(this.stroke) {\r\n            this.strokeRect(...data)\r\n        } else {\r\n            this.fillRect(...data)\r\n        }\r\n    }\r\n\r\n    strokeRoundedRect(X, Y, width, height, color, radius, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const rectangle = new this.Graphics()\r\n        rectangle.lineStyle(lineWidth, color, 1)\r\n        rectangle.drawRoundedRect(X, Y, width, height, radius)\r\n        this.add(rectangle)\r\n    }\r\n\r\n    fillRoundedRect(X, Y, width, height, color, radius) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const rectangle = new this.Graphics()\r\n        rectangle.beginFill(color)\r\n        rectangle.drawRoundedRect(X, Y, width, height, radius)\r\n        rectangle.endFill()\r\n        this.add(rectangle)\r\n    }\r\n\r\n    roundedRect(...data) {\r\n        if(this.stroke) {\r\n            this.strokeRoundedRect(...data)\r\n        } else {\r\n            this.fillRoundedRect(...data)\r\n        }\r\n    }\r\n\r\n     strokeCircle(X, Y, r, color, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const circle = new this.Graphics()\r\n        circle.lineStyle(lineWidth, color, 1)\r\n        circle.drawCircle(X, Y, r)\r\n        this.add(circle)\r\n    }\r\n\r\n    fillCircle(X, Y, r, color) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const circle = new this.Graphics()\r\n        circle.beginFill(color)\r\n        circle.drawCircle(X, Y, r)\r\n        circle.endFill();\r\n        this.add(circle)\r\n    }\r\n\r\n     circle(...data) {\r\n        if(this.stroke) {\r\n            this.strokeCircle(...data)\r\n        } else {\r\n            this.fillCircle(...data)\r\n        }\r\n    }\r\n\r\n    strokeEllipse(X, Y, width, height, color, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const ellipse = new this.Graphics()\r\n        ellipse.lineStyle(lineWidth, color, 1)\r\n        ellipse.drawEllipse(X, Y, width, height)\r\n        this.add(ellipse)\r\n    }\r\n\r\n    fillEllipse(X, Y, width, height, color) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const ellipse = new this.Graphics()\r\n        ellipse.beginFill(color)\r\n        ellipse.drawEllipse(X, Y, width, height)\r\n        ellipse.endFill()\r\n        this.add(ellipse)\r\n    }\r\n\r\n    ellipse(...data) {\r\n        if(this.stroke) {\r\n            this.strokeEllipse(...data)\r\n        } else {\r\n            this.fillEllipse(...data)\r\n        }\r\n    }\r\n\r\n    strokeLine(X1, Y1, X2, Y2, color, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const line = new this.Graphics()\r\n        line.lineStyle(lineWidth, color, 1)\r\n        line.moveTo(X1, Y2)\r\n        line.lineTo(X2, Y2)\r\n        this.add(line)\r\n    }\r\n\r\n    line(...data) {\r\n        this.strokeLine(...data)\r\n    }\r\n\r\n    strokePolygon(points, color, lineWidth = 1) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const polygon = new this.Graphics()\r\n        polygon.lineStyle(lineWidth, color, 1)\r\n        polygon.moveTo(points[0], points[1])\r\n        for(let i = 2; i < points.length; i+=2) {\r\n            polygon.lineTo(points[i], points[i+1])\r\n        }\r\n        polygon.lineTo(points[0], points[1])\r\n        this.add(polygon)\r\n    }\r\n\r\n    fillPolygon(points, color) {\r\n        color = this.resolveColor(color)\r\n        if(!color) return false\r\n        const polygon = new this.Graphics()\r\n        polygon.beginFill(color)\r\n        polygon.drawPolygon(points)\r\n        polygon.endFill()\r\n        this.add(polygon)\r\n    }\r\n\r\n    polygon(...data) {\r\n        if(this.stroke) {\r\n            this.strokePolygon(...data)\r\n        } else {\r\n            this.fillPolygon(...data)\r\n        }\r\n    }\r\n\r\n    image(src, sX, sY, sWidth, sHeight, dX, dY, dWidth = false, dHeight = false) {\r\n        const texture = this.getTexture(src, sX, sY, sWidth, sHeight),\r\n              sprite  = new this.Sprite(texture)\r\n        sprite.position.set(dX, dY)\r\n        if(dWidth) {\r\n            sprite.width  = dWidth\r\n            sprite.height = dHeight\r\n        } else {\r\n        \tsprite.width  = sWidth\r\n        \tsprite.height = sHeight\r\n        }\r\n      \tif(this.rotation) {\r\n      \t\tsprite.anchor.set(0.5, 0.5)\r\n      \t\tsprite.rotation = this.rotation\r\n      \t\tthis.rotation   = false\r\n      \t}\r\n        this.add(sprite)\r\n    }\r\n\r\n    imageBasic(src, dX, dY, width, height) {\r\n    \tconst texture = this.getTextureBasic(src),\r\n    \t      sprite  = new this.Sprite(texture)\r\n    \tsprite.position.set(dX, dY)\r\n    \tsprite.width  = width\r\n    \tsprite.height = height\r\n    \tif(this.rotation) {\r\n      \t\tsprite.anchor.set(0.5, 0.5)\r\n      \t\tsprite.rotation = this.rotation\r\n      \t\tthis.rotation   = false\r\n      \t}\r\n        this.add(sprite)\r\n    }\r\n\r\n    text(_text, X, Y, style) {\r\n        const text = new this.Text(_text, style)\r\n        text.position.set(X, Y)\r\n        text.anchor.set(0.5, 0.5)\r\n        this.add(text)\r\n    }\r\n\r\n    getTexture(src, sX, sY, sWidth, sHeight) {\r\n        return  new this.Texture(\r\n            this.resources[this.prefix + src].texture, \r\n            new this.Rectangle(sX + 1, sY + 1, sWidth - 2, sHeight - 2)\r\n        )\r\n    }\r\n\r\n    getTextureBasic(src) {\r\n    \treturn new this.Texture(this.resources[this.prefix + src].texture)\r\n    }\r\n\r\n    resolveColor(color) {\r\n        color = color.trim().replace(/ /g, '')\r\n        if(color.startsWith('#')) {\r\n            if(color.length == 7) {\r\n                return '0x' + color.substring(1)\r\n            } else {\r\n                return '0x' + color.charAt(1) + color.charAt(1)\r\n                            + color.charAt(2) + color.charAt(2) \r\n                            + color.charAt(3) + color.charAt(3)\r\n            }\r\n        } else if(color.startsWith('rgb(')) {\r\n            const pattern = /(\\d+),(\\d+),(\\d+)/,\r\n                  matches = color.match(pattern),\r\n                        r = parseInt(matches[1]),\r\n                        g = parseInt(matches[2]),\r\n                        b = parseInt(matches[3])\r\n            return '0x' + this.rgbToHex(r, g, b)\r\n        } else {\r\n            color = this.colors[color.toLowerCase()]\r\n            if(!color) {\r\n                console.log('Color not found')\r\n                return false\r\n            }\r\n            return color\r\n        }\r\n    }\r\n\r\n    //Credits to stackoverflow \\o/\r\n    componentToHex(c) {\r\n        const hex = c.toString(16)\r\n        return hex.length == 1 ? \"0\" + hex : hex\r\n    }\r\n\r\n    rgbToHex(r, g, b) {\r\n        return this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b)\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/tools/renderer.js?");

/***/ }),

/***/ "./src/tools/sound-manager.js":
/*!************************************!*\
  !*** ./src/tools/sound-manager.js ***!
  \************************************/
/*! exports provided: SoundManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SoundManager\", function() { return SoundManager; });\nclass SoundManager {\r\n\r\n\tconstructor() {\r\n\t\tthis.sounds = null\r\n\t\tthis.soundsEnded = {}\r\n\t\tthis.soundsToLoop = {}\r\n\t\tthis.soundsPlaying = {}\r\n\t}\r\n\r\n\tinit(sounds) {\r\n\t\tthis.sounds = sounds\r\n\t\tfor(let src in sounds) {\r\n\t\t\tthis.soundsEnded[src] = false\r\n\t\t\tsounds[src].addEventListener('ended', () => {\r\n\t\t\t\tthis.soundsEnded[src] = true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tplay(src, loop = false) {\r\n\t\tif(!this.sounds[src]) {\r\n\t\t\tconsole.error('Sound ' + src + ' not found')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.soundsEnded[src] = false\r\n\t\tthis.soundsPlaying[src] = true\r\n\t\tthis.sounds[src].currentTime = 0\r\n\t\tthis.sounds[src].play()\r\n\t\tif(loop) {\r\n\t\t\tthis.soundsToLoop[src] = true\r\n\t\t}\r\n\t}\r\n\r\n\tstop(src) {\r\n\t\tif(!this.sounds[src]) {\r\n\t\t\tconsole.error('Sound ' + src + ' not found')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.soundsEnded[src] = true\r\n\t\tthis.soundsPlaying[src] = false\r\n\t\tthis.sounds[src].pause()\r\n\t\tthis.sounds[src].currentTime = 0\r\n\t\tif(this.soundsToLoop[src]) {\r\n\t\t\tdelete this.soundsToLoop[src]\r\n\t\t}\r\n\t}\r\n\r\n\tsetVolume(src, volume) {\r\n\t\tthis.sounds[src].volume = volume\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tfor(let src in this.soundsPlaying) {\r\n\t\t\tif(this.soundsEnded[src]){\r\n\t\t\t\tif(this.soundsToLoop[src]) {\r\n\t\t\t\t\tthis.soundsEnded[src] = false\r\n\t\t\t\t\tthis.sounds[src].currentTime = 0\r\n\t\t\t\t\tthis.sounds[src].play()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete this.soundsPlaying[src]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\n\n//# sourceURL=webpack:///./src/tools/sound-manager.js?");

/***/ }),

/***/ "./src/util/dom-functions.js":
/*!***********************************!*\
  !*** ./src/util/dom-functions.js ***!
  \***********************************/
/*! exports provided: getById, getByClass, make, hide, show */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getById\", function() { return getById; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getByClass\", function() { return getByClass; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"make\", function() { return make; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hide\", function() { return hide; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"show\", function() { return show; });\nfunction getById(id) {\r\n\treturn document.getElementById(id)\r\n}\r\n\r\nfunction getByClass(className) {\r\n\treturn document.getElementsByClassName(className)\r\n}\r\n\r\nfunction make(data, text = '') {\r\n\tdata = data.split('.')\r\n\tconst element = document.createElement(data[0])\r\n\tif(data.length == 2) {\r\n\t\tdata = data[1].split(' ')\r\n\t\telement.classList.add(data[0])\r\n\t\tif(data.length == 2) {\r\n\t\t\telement.classList.add(data[1])\r\n\t\t}\r\n\t}\r\n\telement.innerText = text\r\n\t\r\n\treturn element\r\n}\r\n\r\nfunction hide(el) {\r\n\tel.style.display = 'none'\r\n}\r\nfunction show(el) {\r\n\tel.style.display = 'block'\r\n}\n\n//# sourceURL=webpack:///./src/util/dom-functions.js?");

/***/ })

/******/ });